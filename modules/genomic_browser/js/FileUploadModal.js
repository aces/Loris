!function(e){function a(s){if(t[s])return t[s].exports;var r=t[s]={exports:{},id:s,loaded:!1};return e[s].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}var t={};return a.m=e,a.c=t,a.p="",a(0)}([function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=React.createClass({displayName:"GenomicFileUploadModal",propTypes:{baseURL:React.PropTypes.string.isRequired},getInitialState:function(){return{readyForUpload:!1,submited:!1,uploadSummary:{}}},shouldComponentUpdate:function(e,a){return a.readyForUpload!==this.state.readyForUpload||a.submited!==this.state.submited||e.id!==this.props.id},validateForm:function(e){e=e||[],this.setState({readyForUpload:e.reduce(function(e,a,t,s){return e},!0)})},reloadPage:function(){$("#modalContainer").modal("hide"),$("#showdata").click()},handleUploadSubmit:function(e){e.preventDefault();var a=this,t=new FormData(document.getElementById("uploadForm")),s=new XMLHttpRequest;s.previousText="",s.onerror=function(){console.error("[XHR] Fatal Error.")},s.onreadystatechange=function(){var e=document.getElementById("progressBar");try{switch(s.readyState){case 0:break;case 1:break;case 2:break;case 3:var t=s.responseText.substring(s.previousText.length),r=JSON.parse(t);e.innerHTML=String(r.message),e.style.width=r.progress+"%",void 0!==r.error&&(e.className="progress-bar progress-bar-danger"),s.previousText=s.responseText;break;case 4:a.setState({submited:!0})}}catch(a){console.error("[XHR STATECHANGE] Exception: "+a),e.innerHTML="An error occured",e.className="progress-bcar progress-bar-danger",e.style.width="100%"}};var r=this.props.baseURL+"/genomic_browser/ajax/genomic_file_upload.php";s.open("POST",r,!0),s.send(t)},render:function(){var e=[];return this.state.submited?e.push(React.createElement("button",{className:"btn btn-default",onClick:this.reloadPage,"data-dismiss":"modal"},"Ok")):(this.state.readyForUpload&&e.push(React.createElement("button",{className:"btn btn-primary",onClick:this.handleUploadSubmit,role:"button","aria-disabled":"false"},"Upload")),e.push(React.createElement("button",{className:"btn btn-default",id:"cancelButton",role:"reset",type:"reset","data-dismiss":"modal"},"Cancel"))),React.createElement("div",{className:"modal fade",id:"fileUploadModal",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"},React.createElement("div",{className:"modal-dialog"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},React.createElement("span",{"aria-hidden":"true"},"Ã—"),React.createElement("span",{className:"sr-only"},"Close")),React.createElement("h3",{className:"modal-title",id:"myModalLabel"},"Upload File")),React.createElement("div",{className:"modal-body"},React.createElement(r,{baseURL:this.props.baseURL,validate:this.validateForm})),React.createElement("div",{className:"modal-footer"},e))))}}),s=React.createFactory(t),r=React.createClass({displayName:"UploadForm",getInitialState:function(){return{baseURL:"",fileType:"",useColumnHeaders:!0}},getDefaultProps:function(){return{validate:null}},handleFileTypeChange:function(e){e.preventDefault(),this.setState({fileType:e.target.value})},handleCheckboxChange:function(e){"pscidColumn"===e.target.name&&this.setState({useColumnHeaders:!this.state.useColumnHeaders})},componentWillUpdate:function(e,a){this.props.validate()},render:function(){var e=[],a=[];switch(a.push(React.createElement(l,{baseURL:this.props.baseURL,multiple:!1,onFileTypeChange:this.handleFileTypeChange,name:"fileType",label:"File type:"})),this.state.fileType){case"Methylation beta-values":a.push(React.createElement(n,{name:"fileData",label:"File :"})),a.push(React.createElement(o,{name:"description",label:"Description :"})),this.state.useColumnHeaders||a.push(React.createElement(n,{name:"fileMapping",label:"Mapping :"})),a.push(React.createElement(c,{handleChange:this.handleCheckboxChange,checked:this.state.useColumnHeaders,name:"pscidColumn"})),a.push(React.createElement(i,{name:"progressbar",label:"Progress :"}));break;case"Other":a.push(React.createElement(n,{name:"fileData",label:"File :"})),a.push(React.createElement(o,{name:"description",label:"Description :"})),a.push(React.createElement(i,{name:"progressbar",label:"Progress :"}))}return React.createElement("form",{name:"uploadForm",id:"uploadForm",enctype:"multipart/form-data",method:"POST"},React.createElement("div",{className:"row"},e,a))}}),l=React.createClass({displayName:"FileTypeSelect",getDefaultProps:function(){return{baseURL:"",onFileTypeChange:null,getFileType:null}},getInitialState:function(){return{availableFileType:[]}},componentDidMount:function(){this.getGenomicFileType()},getGenomicFileType:function(){var e=this,a=new XMLHttpRequest;a.onreadystatechange=function(){try{switch(a.readyState){case 0:break;case 1:break;case 2:break;case 3:a.previousText=a.responseText;break;case 4:var t=[{genomicFileType:""}].concat(JSON.parse(a.responseText));e.setState({availableFileType:t})}}catch(e){console.error("Exception: "+e)}};var t=this.props.baseURL+"/AjaxHelper.php?Module=genomic_browser&script=get_genomic_file_type.php";a.open("POST",t,!0),a.send()},render:function(){var e=this.state.availableFileType.map(function(e){return React.createElement("option",{value:e.genomicFileType},e.genomicFileType)});return React.createElement("div",{className:"col-xs-12 form-group"},React.createElement("label",{for:this.props.name,className:"col-xs-3"},this.props.label,React.createElement("font",{color:"red"},React.createElement("sup",null," *"))),React.createElement("div",{className:"col-xs-9"},React.createElement("select",{name:this.props.name,id:this.props.name,className:"form-fields form-control input-sm",onChange:this.props.onFileTypeChange},e)))}}),n=React.createClass({displayName:"FileInput",propTypes:{name:React.PropTypes.string,label:React.PropTypes.string},render:function(){return React.createElement("div",{className:"col-xs-12 form-group"},React.createElement("label",{className:"col-xs-3",for:this.props.name},this.props.label),React.createElement("div",{className:"col-xs-9"},React.createElement("input",{type:"file",name:this.props.name,id:this.props.name,onChange:this.handleChange,className:"fileUpload"})))}}),o=React.createClass({displayName:"TextAreaInput",propTypes:{name:React.PropTypes.string,label:React.PropTypes.string},render:function(){return React.createElement("div",{className:"col-xs-12 form-group"},React.createElement("label",{className:"col-xs-3",for:this.props.name},this.props.label),React.createElement("div",{className:"col-xs-9"},React.createElement("textarea",{cols:"20",rows:"3",name:this.props.name,onChange:this.handleChange,id:this.props.name,style:{border:"2px inset"},className:"ui-corner-all form-fields form-control input-sm"})))}}),c=React.createClass({displayName:"CheckboxInput",propTypes:{name:React.PropTypes.string},getInitialState:function(){return{checked:this.props.checked||!1}},render:function(){return React.createElement("div",{className:"form-group col-sm-12"},React.createElement("label",{className:"col-xs-3"}),React.createElement("div",{className:"col-xs-9"},React.createElement("input",{className:"user-success",name:this.props.name,id:this.props.name,type:"checkbox",checked:"true",style:{"margin-right":"1em"}},"Use PSCID in column headers",this.props.label)))}}),i=React.createClass({displayName:"ProgressBar",propTypes:{name:React.PropTypes.string,label:React.PropTypes.string},render:function(){return React.createElement("div",{className:"col-xs-12 form-group"},React.createElement("label",{className:"col-xs-3",for:this.props.name},this.props.label),React.createElement("div",{className:"col-xs-9"},React.createElement("div",{className:"progress",style:{height:"20px"}},React.createElement("div",{className:"progress-bar progress-bar-success",id:"progressBar",role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"}))))}});window.GenomicFileUploadModal=t,window.RGenomicFileUploadModal=s,window.UploadForm=r,window.FileTypeSelect=l,window.FileInput=n,window.TextAreaInput=o,window.CheckboxInput=c,window.ProgressBar=i,a.default={GenomicFileUploadModal:t,RGenomicFileUploadModal:s,UploadForm:r,FileTypeSelect:l,FileInput:n,TextAreaInput:o,CheckboxInput:c,ProgressBar:i}}]);
//# sourceMappingURL=FileUploadModal.js.map