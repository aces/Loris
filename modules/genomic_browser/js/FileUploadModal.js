(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=50)})({0:function(module,exports){module.exports=React},1:function(module,exports,__webpack_require__){if(false){var throwOnDirectAccess,isValidElement,REACT_ELEMENT_TYPE}else{module.exports=__webpack_require__(2)()}},2:function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(3);function emptyFunction(){}module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret===ReactPropTypesSecret){return}var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use PropTypes.checkPropTypes() to call them. "+"Read more at http://fb.me/use-check-prop-types");err.name="Invariant Violation";throw err}shim.isRequired=shim;function getShim(){return shim}var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim};ReactPropTypes.checkPropTypes=emptyFunction;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}},3:function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},50:function(module,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var GenomicFileUploadModal=function(_Component){_inherits(GenomicFileUploadModal,_Component);function GenomicFileUploadModal(){_classCallCheck(this,GenomicFileUploadModal);var _this=_possibleConstructorReturn(this,(GenomicFileUploadModal.__proto__||Object.getPrototypeOf(GenomicFileUploadModal)).call(this));_this.state={readyForUpload:false,submited:false,uploadSummary:{}};_this.validateForm=_this.validateForm.bind(_this);_this.reloadPage=_this.reloadPage.bind(_this);_this.handleUploadSubmit=_this.handleUploadSubmit.bind(_this);return _this}_createClass(GenomicFileUploadModal,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps,nextState){return nextState.readyForUpload!==this.state.readyForUpload||nextState.submited!==this.state.submited||nextProps.id!==this.props.id}},{key:"validateForm",value:function validateForm(requiredInputs){requiredInputs=requiredInputs||[];this.setState({readyForUpload:requiredInputs.reduce(function(previousValue,currentValue,currentIndex,array){return previousValue},true)})}},{key:"reloadPage",value:function reloadPage(){$("#modalContainer").modal("hide");$("#showdata").click()}},{key:"handleUploadSubmit",value:function handleUploadSubmit(event){event.preventDefault();var self=this;var formData=new FormData(document.getElementById("uploadForm"));var xhr=new XMLHttpRequest;xhr.previousText="";xhr.onerror=function(){console.error("[XHR] Fatal Error.")};xhr.onreadystatechange=function(){var bar=document.getElementById("progressBar");try{switch(xhr.readyState){case 0:break;case 1:break;case 2:break;case 3:var newResponse=xhr.responseText.substring(xhr.previousText.length);var result=JSON.parse(newResponse);bar.innerHTML=String(result.message);bar.style.width=result.progress+"%";if(result.error!==undefined){bar.className="progress-bar progress-bar-danger"}xhr.previousText=xhr.responseText;break;case 4:self.setState({submited:true});break;default:break}}catch(e){console.error("[XHR STATECHANGE] Exception: "+e);bar.innerHTML="An error occurred";bar.className="progress-bcar progress-bar-danger";bar.style.width="100%"}};var url=this.props.baseURL+"/genomic_browser/ajax/genomic_file_upload.php";xhr.open("POST",url,true);xhr.send(formData)}},{key:"render",value:function render(){var footerButtons=[];if(this.state.submited){footerButtons.push(_react2.default.createElement("button",{key:"submited",className:"btn btn-default",onClick:this.reloadPage,"data-dismiss":"modal"},"Ok"))}else{if(this.state.readyForUpload){footerButtons.push(_react2.default.createElement("button",{key:"readyForUpload",className:"btn btn-primary",onClick:this.handleUploadSubmit,role:"button","aria-disabled":"false"},"Upload"))}footerButtons.push(_react2.default.createElement("button",{key:"cancel",className:"btn btn-default",id:"cancelButton",role:"reset",type:"reset","data-dismiss":"modal"},"Cancel"))}return _react2.default.createElement("div",{className:"modal fade",id:"fileUploadModal",tabIndex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"},_react2.default.createElement("div",{className:"modal-dialog"},_react2.default.createElement("div",{className:"modal-content"},_react2.default.createElement("div",{className:"modal-header"},_react2.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},_react2.default.createElement("span",{"aria-hidden":"true"},"Ã—"),_react2.default.createElement("span",{className:"sr-only"},"Close")),_react2.default.createElement("h3",{className:"modal-title",id:"myModalLabel"},"Upload File")),_react2.default.createElement("div",{className:"modal-body"},_react2.default.createElement(UploadForm,{baseURL:this.props.baseURL,validate:this.validateForm})),_react2.default.createElement("div",{className:"modal-footer"},footerButtons))))}}]);return GenomicFileUploadModal}(_react.Component);GenomicFileUploadModal.propTypes={baseURL:_propTypes2.default.string.isRequired};var RGenomicFileUploadModal=_react2.default.createFactory(GenomicFileUploadModal);var UploadForm=function(_Component2){_inherits(UploadForm,_Component2);function UploadForm(){_classCallCheck(this,UploadForm);var _this2=_possibleConstructorReturn(this,(UploadForm.__proto__||Object.getPrototypeOf(UploadForm)).call(this));_this2.state={baseURL:"",fileType:"",useColumnHeaders:true};_this2.handleFileTypeChange=_this2.handleFileTypeChange.bind(_this2);_this2.handleCheckboxChange=_this2.handleCheckboxChange.bind(_this2);return _this2}_createClass(UploadForm,[{key:"handleFileTypeChange",value:function handleFileTypeChange(event){event.preventDefault();this.setState({fileType:event.target.value})}},{key:"handleCheckboxChange",value:function handleCheckboxChange(event){if(event.target.name==="pscidColumn"){this.setState({useColumnHeaders:!this.state.useColumnHeaders})}}},{key:"componentWillUpdate",value:function componentWillUpdate(prevProps,prevState){this.props.validate()}},{key:"render",value:function render(){var instructions=[];var inputs=[];inputs.push(_react2.default.createElement(FileTypeSelect,{key:"fileType",baseURL:this.props.baseURL,multiple:false,onFileTypeChange:this.handleFileTypeChange,name:"fileType",label:"File type:"}));switch(this.state.fileType){case"Methylation beta-values":inputs.push(_react2.default.createElement(FileInput,{key:"fileData",name:"fileData",label:"File :"}));inputs.push(_react2.default.createElement(TextAreaInput,{key:"description",name:"description",label:"Description :"}));if(!this.state.useColumnHeaders){inputs.push(_react2.default.createElement(FileInput,{key:"fileMapping",name:"fileMapping",label:"Mapping :"}))}inputs.push(_react2.default.createElement(CheckboxInput,{key:"pscidColumn",handleChange:this.handleCheckboxChange,checked:this.state.useColumnHeaders,name:"pscidColumn"}));inputs.push(_react2.default.createElement(ProgressBar,{key:"progressbar",name:"progressbar",label:"Progress :"}));break;case"Other":inputs.push(_react2.default.createElement(FileInput,{key:"fileData",name:"fileData",label:"File :"}));inputs.push(_react2.default.createElement(TextAreaInput,{key:"description",name:"description",label:"Description :"}));inputs.push(_react2.default.createElement(ProgressBar,{key:"progressbar",name:"progressbar",label:"Progress :"}));break;default:}return _react2.default.createElement("form",{name:"uploadForm",id:"uploadForm",encType:"multipart/form-data",method:"POST"},_react2.default.createElement("div",{className:"row"},instructions,inputs))}}]);return UploadForm}(_react.Component);UploadForm.defaultProps={validate:null};UploadForm.propTypes={validate:_propTypes2.default.func};var FileTypeSelect=function(_Component3){_inherits(FileTypeSelect,_Component3);function FileTypeSelect(){_classCallCheck(this,FileTypeSelect);var _this3=_possibleConstructorReturn(this,(FileTypeSelect.__proto__||Object.getPrototypeOf(FileTypeSelect)).call(this));_this3.state={availableFileType:[]};_this3.getGenomicFileType=_this3.getGenomicFileType.bind(_this3);return _this3}_createClass(FileTypeSelect,[{key:"componentDidMount",value:function componentDidMount(){this.getGenomicFileType()}},{key:"getGenomicFileType",value:function getGenomicFileType(){var self=this;var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){try{switch(xhr.readyState){case 0:break;case 1:break;case 2:break;case 3:xhr.previousText=xhr.responseText;break;case 4:var fileType=[{genomicFileType:""}].concat(JSON.parse(xhr.responseText));self.setState({availableFileType:fileType});break;default:break}}catch(e){console.error("Exception: "+e)}};var url=this.props.baseURL+"/AjaxHelper.php?Module=genomic_browser&script=get_genomic_file_type.php";xhr.open("POST",url,true);xhr.send()}},{key:"render",value:function render(){var options=this.state.availableFileType.map(function(e){return _react2.default.createElement("option",{key:e.genomicFileType,value:e.genomicFileType},e.genomicFileType)});return _react2.default.createElement("div",{className:"col-xs-12 form-group"},_react2.default.createElement("label",{htmlFor:this.props.name,className:"col-xs-3"},this.props.label,_react2.default.createElement("font",{color:"red"},_react2.default.createElement("sup",null," *"))),_react2.default.createElement("div",{className:"col-xs-9"},_react2.default.createElement("select",{name:this.props.name,id:this.props.name,className:"form-fields form-control input-sm",onChange:this.props.onFileTypeChange},options)))}}]);return FileTypeSelect}(_react.Component);FileTypeSelect.propTypes={baseURL:_propTypes2.default.string,onFileTypeChange:_propTypes2.default.func,getFileType:_propTypes2.default.func};FileTypeSelect.defaultProps={baseURL:"",onFileTypeChange:null,getFileType:null};var FileInput=function(_Component4){_inherits(FileInput,_Component4);function FileInput(){_classCallCheck(this,FileInput);var _this4=_possibleConstructorReturn(this,(FileInput.__proto__||Object.getPrototypeOf(FileInput)).call(this));_this4.state={};return _this4}_createClass(FileInput,[{key:"render",value:function render(){return _react2.default.createElement("div",{className:"col-xs-12 form-group"},_react2.default.createElement("label",{className:"col-xs-3",htmlFor:this.props.name},this.props.label),_react2.default.createElement("div",{className:"col-xs-9"},_react2.default.createElement("input",{type:"file",name:this.props.name,id:this.props.name,onChange:this.handleChange,className:"fileUpload"})))}}]);return FileInput}(_react.Component);FileInput.propTypes={name:_propTypes2.default.string,label:_propTypes2.default.string};var TextAreaInput=function(_Component5){_inherits(TextAreaInput,_Component5);function TextAreaInput(){_classCallCheck(this,TextAreaInput);var _this5=_possibleConstructorReturn(this,(TextAreaInput.__proto__||Object.getPrototypeOf(TextAreaInput)).call(this));_this5.state={};return _this5}_createClass(TextAreaInput,[{key:"render",value:function render(){return _react2.default.createElement("div",{className:"col-xs-12 form-group"},_react2.default.createElement("label",{className:"col-xs-3",htmlFor:this.props.name},this.props.label),_react2.default.createElement("div",{className:"col-xs-9"},_react2.default.createElement("textarea",{cols:"20",rows:"3",name:this.props.name,onChange:this.handleChange,id:this.props.name,style:{border:"2px inset"},className:"ui-corner-all form-fields form-control input-sm"})))}}]);return TextAreaInput}(_react.Component);TextAreaInput.propTypes={name:_propTypes2.default.string,label:_propTypes2.default.string};var CheckboxInput=function(_Component6){_inherits(CheckboxInput,_Component6);function CheckboxInput(){_classCallCheck(this,CheckboxInput);var _this6=_possibleConstructorReturn(this,(CheckboxInput.__proto__||Object.getPrototypeOf(CheckboxInput)).call(this));_this6.state={checked:_this6.props.checked||false};return _this6}_createClass(CheckboxInput,[{key:"render",value:function render(){return _react2.default.createElement("div",{className:"form-group col-sm-12"},_react2.default.createElement("label",{className:"col-xs-3"}),_react2.default.createElement("div",{className:"col-xs-9"},_react2.default.createElement("input",{className:"user-success",name:this.props.name,id:this.props.name,type:"checkbox",defaultChecked:"true",style:{marginRight:"1em"}}),"Use PSCID in column headers",this.props.label))}}]);return CheckboxInput}(_react.Component);CheckboxInput.propTypes={name:_propTypes2.default.string};var ProgressBar=function(_Component7){_inherits(ProgressBar,_Component7);function ProgressBar(){_classCallCheck(this,ProgressBar);var _this7=_possibleConstructorReturn(this,(ProgressBar.__proto__||Object.getPrototypeOf(ProgressBar)).call(this));_this7.state={};return _this7}_createClass(ProgressBar,[{key:"render",value:function render(){return _react2.default.createElement("div",{className:"col-xs-12 form-group"},_react2.default.createElement("label",{className:"col-xs-3",htmlFor:this.props.name},this.props.label),_react2.default.createElement("div",{className:"col-xs-9"},_react2.default.createElement("div",{className:"progress",style:{height:"20px"}},_react2.default.createElement("div",{className:"progress-bar progress-bar-success",id:"progressBar",role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"}))))}}]);return ProgressBar}(_react.Component);ProgressBar.propTypes={name:_propTypes2.default.string,label:_propTypes2.default.string};window.GenomicFileUploadModal=GenomicFileUploadModal;window.RGenomicFileUploadModal=RGenomicFileUploadModal;window.UploadForm=UploadForm;window.FileTypeSelect=FileTypeSelect;window.FileInput=FileInput;window.TextAreaInput=TextAreaInput;window.CheckboxInput=CheckboxInput;window.ProgressBar=ProgressBar;exports.default={GenomicFileUploadModal,RGenomicFileUploadModal,UploadForm,FileTypeSelect,FileInput,TextAreaInput,CheckboxInput,ProgressBar}}});
//# sourceMappingURL=FileUploadModal.js.map