!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),c=r(s),p=n(3),u=r(p),d=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoaded:!1,filter:{}},n.fetchData=n.fetchData.bind(n),n.updateFilter=n.updateFilter.bind(n),n}return o(t,e),l(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){$.ajax(this.props.DataURL,{method:"GET",dataType:"json",success:function(e){loris.hiddenHeaders=e.hiddenHeaders?e.hiddenHeaders:[],this.setState({Data:e,isLoaded:!0})}.bind(this),error:function(e){console.error(e)}})}},{key:"updateFilter",value:function(e){this.setState({filter:e})}},{key:"render",value:function(){if(!this.state.isLoaded)return React.createElement("button",{className:"btn-info has-spinner"},"Loading",React.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}));var e="patientID",t="patientName",n="site",r="gender",a="dateOfBirth",i="acquisition",o="archiveLocation",l="seriesuid",s={M:"Male",F:"Female",O:"N/A"};return React.createElement("div",null,React.createElement(c.default,{Module:"dicom_archive",name:"dicom_filter",id:"dicom_filter",columns:2,onUpdate:this.updateFilter,filter:this.state.filter},React.createElement(TextboxElement,{name:e,label:"Patient ID",ref:e}),React.createElement(TextboxElement,{name:t,label:"Patient Name",ref:t}),React.createElement(SelectElement,{name:n,label:"Sites",options:this.state.Data.Sites,ref:n}),React.createElement(SelectElement,{name:r,label:"Gender",options:s,ref:r}),React.createElement(DateElement,{name:a,label:"Date of Birth",ref:a}),React.createElement(DateElement,{name:i,label:"Acquisition Date",ref:i}),React.createElement(TextboxElement,{name:o,label:"Archive Location",ref:o}),React.createElement(TextboxElement,{name:l,label:"Series UID",ref:l}),React.createElement(ButtonElement,{label:"Clear Filters",type:"reset"})),React.createElement(StaticDataTable,{Data:this.state.Data.Data,Headers:this.state.Data.Headers,Filter:this.state.filter,getFormattedCell:u.default}))}}]),t}(React.Component);d.propTypes={Module:React.PropTypes.string.isRequired,DataURL:React.PropTypes.string.isRequired},window.onload=function(){var e=loris.BaseURL+"/dicom_archive/?format=json",t=React.createElement(d,{Module:"dicom_archive",DataURL:e}),n=document.createElement("div");n.id="page-dicom-archive";var r=document.getElementById("lorisworkspace");r.appendChild(n),ReactDOM.render(t,document.getElementById("page-dicom-archive"))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),c=r(s),p=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clearFilter=n.clearFilter.bind(n),n.getFormChildren=n.getFormChildren.bind(n),n.setFilter=n.setFilter.bind(n),n.onElementUpdate=n.onElementUpdate.bind(n),n.queryString=QueryString.get(),n}return o(t,e),l(t,[{key:"componentDidMount",value:function(){var e={},t=this.queryString;Object.keys(t).forEach(function(n){var r="candidateID"===n?"candID":n;e[r]={value:t[n],exactMatch:!1}}),this.props.onUpdate(e)}},{key:"clearFilter",value:function(){this.queryString=QueryString.clear(this.props.Module),this.props.onUpdate({})}},{key:"getFormChildren",value:function(){var e=[];return React.Children.forEach(this.props.children,function(t,n){if(React.isValidElement(t)&&"function"==typeof t.type&&t.props.onUserInput){var r=t.props.onUserInput,a=r.name,i=t.type.displayName,o="candID"===t.props.name?"candidateID":t.props.name,l=this.queryString[o];"onUserInput"===a&&(r="ButtonElement"===i&&"reset"===t.props.type?this.clearFilter:this.onElementUpdate.bind(null,i)),e.push(React.cloneElement(t,{onUserInput:r,value:l?l:"",key:n})),this.setFilter(i,t.props.name,l)}else e.push(React.cloneElement(t,{key:n}))}.bind(this)),e}},{key:"setFilter",value:function(e,t,n){var r={};return this.props.filter&&(r=JSON.parse(JSON.stringify(this.props.filter))),t&&n?(r[t]={},r[t].value=n,r[t].exactMatch="SelectElement"===e):r&&t&&""===n&&delete r[t],r}},{key:"onElementUpdate",value:function(e,t,n){if("string"==typeof t&&"string"==typeof n){var r="candID"===t?"candidateID":t;this.queryString=QueryString.set(this.queryString,r,n);var a=this.setFilter(e,t,n);this.props.onUpdate(a)}}},{key:"render",value:function(){var e=this.getFormChildren(),t=this.props.formElements;return t&&Object.keys(t).forEach(function(e){var n="candID"===e?"candidateID":e;t[e].onUserInput=this.onElementUpdate.bind(null,e),t[e].value=this.queryString[n]}.bind(this)),React.createElement(c.default,{id:this.props.id,height:this.props.height,title:this.props.title},React.createElement(FormElement,this.props,e))}}]),t}(React.Component);p.defaultProps={id:"selection-filter",height:"100%",title:"Selection Filter",onUpdate:function(){console.warn("onUpdate() callback is not set!")}},p.propTypes={Module:React.PropTypes.string.isRequired,filter:React.PropTypes.object.isRequired,id:React.PropTypes.string,height:React.PropTypes.string,title:React.PropTypes.string,onUpdate:React.PropTypes.func},t.default=p},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={collapsed:a.props.initCollapsed},a.panelClass=a.props.initCollapsed?"panel-collapse collapse":"panel-collapse collapse in",a.toggleCollapsed=a.toggleCollapsed.bind(a),a}return a(t,e),i(t,[{key:"toggleCollapsed",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){var e=this.state.collapsed?"glyphicon pull-right glyphicon-chevron-down":"glyphicon pull-right glyphicon-chevron-up",t=this.props.title?React.createElement("div",{className:"panel-heading",onClick:this.toggleCollapsed,"data-toggle":"collapse","data-target":"#"+this.props.id,style:{cursor:"pointer"}},this.props.title,React.createElement("span",{className:e})):"";return React.createElement("div",{className:"panel panel-primary"},t,React.createElement("div",{id:this.props.id,className:this.panelClass,role:"tabpanel"},React.createElement("div",{className:"panel-body",style:{height:this.props.height}},this.props.children)))}}]),t}(React.Component);o.propTypes={id:React.PropTypes.string,height:React.PropTypes.string,title:React.PropTypes.string},o.defaultProps={initCollapsed:!1,id:"default-panel",height:"100%"},t.default=o},function(e,t){"use strict";function n(e,t,n,r){if(loris.hiddenHeaders.indexOf(e)>-1)return null;var a={};if(r.forEach(function(e,t){a[e]=n[t]},this),"Metadata"===e){var i=loris.BaseURL+"/dicom_archive/viewDetails/?tarchiveID="+a.TarchiveID;return React.createElement("td",null,React.createElement("a",{href:i},t))}if("MRI Browser"===e){if(null===a.SessionID||""===a.SessionID)return React.createElement("td",null,"Â ");var o=loris.BaseURL+"/imaging_browser/viewSession/?sessionID="+a.SessionID;return React.createElement("td",null,React.createElement("a",{href:o},t))}return"INVALID - HIDDEN"===t?React.createElement("td",{className:"text-danger"},t):React.createElement("td",null,t)}Object.defineProperty(t,"__esModule",{value:!0}),window.formatColumn=n,t.default=n}]);
//# sourceMappingURL=dicom_archive.js.map