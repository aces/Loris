!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}({0:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _Home=__webpack_require__(25),_Home2=_interopRequireDefault(_Home);window.onload=function(){ReactDOM.render(React.createElement(_Home2.default,null),document.getElementById("page"))}},25:function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function filterAccountsPendingApproval(e){loris.loadFilteredMenuClickHandler("user_accounts/",{pending:"Y"})(e)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),WelcomePanel=function(_React$Component){function WelcomePanel(){return _classCallCheck(this,WelcomePanel),_possibleConstructorReturn(this,(WelcomePanel.__proto__||Object.getPrototypeOf(WelcomePanel)).apply(this,arguments))}return _inherits(WelcomePanel,_React$Component),_createClass(WelcomePanel,[{key:"render",value:function(){var linkJSX="";if(this.props.links){var links=this.props.links.map(function(link){return React.createElement("a",{href:link.url,target:link.windowName,key:link.url},link.label)});linkJSX=React.createElement("div",{className:"panel-footer"},links)}return React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-body"},React.createElement("h3",{className:"welcome"},"Welcome, ",this.props.username),React.createElement("p",{className:"pull-right small login-time"},"Last login: ",this.props.lastlogin),React.createElement("p",{className:"project-description",dangerouslySetInnerHTML:{__html:this.props.description}})),linkJSX)}}]),WelcomePanel}(React.Component),ProgressBar=function(_React$Component2){function ProgressBar(){return _classCallCheck(this,ProgressBar),_possibleConstructorReturn(this,(ProgressBar.__proto__||Object.getPrototypeOf(ProgressBar)).apply(this,arguments))}return _inherits(ProgressBar,_React$Component2),_createClass(ProgressBar,[{key:"render",value:function(){var progressBar=React.createElement("p",null,"Please add a recruitment target for ",this.props.data.title,".");if(this.props.data.recruitment_target){var femaleStyle={width:this.props.data.female_percent+"%"},maleStyle={width:this.props.data.male_percent+"%"},progressBarRec=React.createElement("div",{className:"progress"},React.createElement("div",{className:"progress-bar progress-bar-female",role:"progressbar",style:femaleStyle,"data-toggle":"tooltip","data-placement":"bottom",title:this.props.data.female_percent+"%"},React.createElement("p",null,this.props.data.female_total,React.createElement("br",null),"Females")),React.createElement("div",{className:"progress-bar progress-bar-male","data-toggle":"tooltip","data-placement":"bottom",role:"progressbar",style:maleStyle,title:this.props.data.male_percent+"%"},React.createElement("p",null,this.props.data.male_total,React.createElement("br",null),"Males")),React.createElement("p",{className:"pull-right small target"},"Target: ",this.props.data.recruitment_target));progressBar=React.createElement("div",null,React.createElement("h5",null,this.props.data.title),this.props.data.surpassed_recruitment&&React.createElement("p",null,"The recruitment target (",this.props.data.recruitment_target,") has been passed."),progressBarRec)}return progressBar}}]),ProgressBar}(React.Component),RecruitmentPanel=function(_React$Component3){function RecruitmentPanel(){return _classCallCheck(this,RecruitmentPanel),_possibleConstructorReturn(this,(RecruitmentPanel.__proto__||Object.getPrototypeOf(RecruitmentPanel)).apply(this,arguments))}return _inherits(RecruitmentPanel,_React$Component3),_createClass(RecruitmentPanel,[{key:"render",value:function(){if(!this.props.recruitment)return null;var recruitmentCharts=React.createElement("p",null,"There have been no candidates registered yet.");this.props.recruitment.overall.total_recruitment>0&&(recruitmentCharts=React.createElement("div",null,React.createElement("div",{className:"col-lg-4 col-md-4 col-sm-4"},React.createElement("div",null,React.createElement("h5",{className:"chart-title"},"Total recruitment per site"),React.createElement("div",{id:"recruitmentPieChart"}))),React.createElement("div",{className:"col-lg-8 col-md-8 col-sm-8"},React.createElement("div",null,React.createElement("h5",{className:"chart-title"},"Gender breakdown by site"),React.createElement("div",{id:"recruitmentBarChart"})))));var projectProgress="";return 1==this.props.useProject&&(projectProgress=this.props.recruitment.map(function(project){return React.createElement(ProgressBar,{data:project})})),React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},React.createElement("h3",{className:"panel-title"},"Recruitment"),React.createElement("span",{className:"pull-right clickable glyphicon glyphicon-chevron-up"}),React.createElement("div",{className:"pull-right"},React.createElement("div",{className:"btn-group views"},React.createElement("button",{type:"button",className:"btn btn-default btn-xs dropdown-toggle","data-toggle":"dropdown"},"Views",React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu pull-right",role:"menu"},React.createElement("li",{className:"active"},React.createElement("a",{"data-target":"overall-recruitment"},"View overall recruitment")),React.createElement("li",null,React.createElement("a",{"data-target":"recruitment-site-breakdown"},"View site breakdown")),1==this.props.useProject&&React.createElement("li",null,React.createElement("a",{"data-target":"recruitment-project-breakdown"},"View project breakdown")))))),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"recruitment-panel",id:"overall-recruitment"},React.createElement(ProgressBar,{data:this.props.recruitment.overall})),React.createElement("div",{className:"recruitment-panel hidden",id:"recruitment-site-breakdown"},recruitmentCharts),1==this.props.useProject&&React.createElement("div",{className:"recruitment-panel hidden",id:"recruitment-project-breakdown"},projectProgress)))}}]),RecruitmentPanel}(React.Component),StudyProgressionPanel=function(_React$Component4){function StudyProgressionPanel(){return _classCallCheck(this,StudyProgressionPanel),_possibleConstructorReturn(this,(StudyProgressionPanel.__proto__||Object.getPrototypeOf(StudyProgressionPanel)).apply(this,arguments))}return _inherits(StudyProgressionPanel,_React$Component4),_createClass(StudyProgressionPanel,[{key:"render",value:function(){if(!this.props.recruitment)return null;var scanChart=React.createElement("p",null,"There have been no scans yet.");this.props.totalScans>0&&(scanChart=React.createElement("div",{id:"scanChart"}));var recruitmentChart=React.createElement("p",null,"There have been no candidates registered yet.");return this.props.recruitment.overall.total_recruitment>0&&(recruitmentChart=React.createElement("div",{id:"recruitmentChart"})),React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},React.createElement("h3",{className:"panel-title"},"Study Progression"),React.createElement("span",{className:"pull-right clickable glyphicon glyphicon-chevron-up"}),React.createElement("div",{className:"pull-right"},React.createElement("div",{className:"btn-group views"},React.createElement("button",{type:"button",className:"btn btn-default btn-xs dropdown-toggle","data-toggle":"dropdown"},"Views",React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu pull-right",role:"menu"},React.createElement("li",{className:"active"},React.createElement("a",{"data-target":"scans-line-chart-panel"},"View scans per site")),React.createElement("li",null,React.createElement("a",{"data-target":"recruitment-line-chart-panel"},"View recruitment per site")))))),React.createElement("div",{className:"panel-body"},React.createElement("div",{id:"scans-line-chart-panel"},React.createElement("h5",{className:"chart-title"},"Scan sessions per site"),scanChart),React.createElement("div",{id:"recruitment-line-chart-panel",className:"hidden"},React.createElement("h5",{className:"chart-title"},"Recruitment per site"),recruitmentChart)))}}]),StudyProgressionPanel}(React.Component),Task=function(_React$Component5){function Task(){return _classCallCheck(this,Task),_possibleConstructorReturn(this,(Task.__proto__||Object.getPrototypeOf(Task)).apply(this,arguments))}return _inherits(Task,_React$Component5),_createClass(Task,[{key:"render",value:function(){var href=this.props.URL,click=function(){};if(this.props.label.indexOf("Incomplete form")>-1&&!loris.userHasPermission("access_all_profiles")){var links=[];for(var siteName in href){var URL=href[siteName];links.push(React.createElement("a",{href:URL},React.createElement("p",{style:{color:"#555"},className:"small task-site"},siteName,React.createElement("span",{className:"glyphicon glyphicon-chevron-right small"}))))}return React.createElement("div",{className:"list-group-item"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-8 test-left"},React.createElement("div",{className:"huge"},this.props.count),this.props.label),React.createElement("div",{className:"col-xs-4 text-right alert-chevron"},links)))}return this.props.URL===loris.BaseURL+"/user_accounts/"&&(click=filterAccountsPendingApproval,href="#"),React.createElement("a",{href:href,onClick:click,className:"list-group-item"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-8 text-left"},React.createElement("div",{className:"huge"},this.props.count),this.props.label),React.createElement("div",{className:"col-xs-4 text-right alert-chevron"},React.createElement("span",{className:"glyphicon glyphicon-chevron-right medium"}),React.createElement("p",{className:"small task-site"},this.props.site))))}}]),Task}(React.Component),TasksPanel=function(_React$Component6){function TasksPanel(){return _classCallCheck(this,TasksPanel),_possibleConstructorReturn(this,(TasksPanel.__proto__||Object.getPrototypeOf(TasksPanel)).apply(this,arguments))}return _inherits(TasksPanel,_React$Component6),_createClass(TasksPanel,[{key:"render",value:function(){var tasks=this.props.tasks.map(function(task){return React.createElement(Task,{URL:task.URL,key:task.label,count:task.count,label:task.label,site:task.site})});return React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},React.createElement("h3",{className:"panel-title"},"My Tasks"),React.createElement("span",{className:"pull-right clickable glyphicon glyphicon-chevron-up"})),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"list-group tasks"},tasks)))}}]),TasksPanel}(React.Component),DocRepoItem=function(_React$Component7){function DocRepoItem(){return _classCallCheck(this,DocRepoItem),_possibleConstructorReturn(this,(DocRepoItem.__proto__||Object.getPrototypeOf(DocRepoItem)).apply(this,arguments))}return _inherits(DocRepoItem,_React$Component7),_createClass(DocRepoItem,[{key:"render",value:function(){var href=loris.baseURL+"AjaxHelper.php?Module=document_repository&script=GetFile.php&File="+this.props.dataDir;return React.createElement("a",{href:href,download:this.props.fileName,className:"list-group-item"},1===this.props.new&&React.createElement("span",{className:"pull-left new-flag"},"NEW"),React.createElement("span",{className:"pull-right text-muted small"},"Uploaded: ",this.props.dateUploaded),React.createElement("br",null),this.props.fileName)}}]),DocRepoItem}(React.Component),BVLFeedbackItem=(function(_React$Component8){function DocRepoPanel(){return _classCallCheck(this,DocRepoPanel),_possibleConstructorReturn(this,(DocRepoPanel.__proto__||Object.getPrototypeOf(DocRepoPanel)).apply(this,arguments))}return _inherits(DocRepoPanel,_React$Component8),_createClass(DocRepoPanel,[{key:"render",value:function(){var DocRepoItems=this.props.notifications.map(function(notification){return React.createElement(DocRepoItem,{dataDir:notification.dataDir,fileName:notification.fileName,new:notification.new,dateUploaded:notification.dateUploaded})}),docRepoURL=loris.baseURL+"/document_repository/";return React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},React.createElement("h3",{className:"panel-title"},"Document Repository Notifications"),React.createElement("span",{className:"pull-right clickable glyphicon glyphicon-chevron-up"})),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"list-group bvl-feedback-item"},DocRepoItems),React.createElement("a",{href:docRepoURL,className:"btn btn-default btn-block"},"Document Repository",React.createElement("span",{className:"glyphicon glyphicon-chevron-right"}))))}}]),DocRepoPanel}(React.Component),function(_React$Component9){function BVLFeedbackItem(){return _classCallCheck(this,BVLFeedbackItem),_possibleConstructorReturn(this,(BVLFeedbackItem.__proto__||Object.getPrototypeOf(BVLFeedbackItem)).apply(this,arguments))}return _inherits(BVLFeedbackItem,_React$Component9),_createClass(BVLFeedbackItem,[{key:"render",value:function(){var href=loris.BaseURL+this.props.URL;return React.createElement("a",{href:href,className:"list-group-item"},1===this.props.new&&React.createElement("span",{className:"pull-left new-flag"},"NEW"),React.createElement("span",{className:"pull-right text-muted small"},"Updated: ",this.props.testDate),React.createElement("br",null),this.props.name,": ",this.props.comment)}}]),BVLFeedbackItem}(React.Component)),BVLFeedbackPanel=function(_React$Component10){function BVLFeedbackPanel(){return _classCallCheck(this,BVLFeedbackPanel),_possibleConstructorReturn(this,(BVLFeedbackPanel.__proto__||Object.getPrototypeOf(BVLFeedbackPanel)).apply(this,arguments))}return _inherits(BVLFeedbackPanel,_React$Component10),_createClass(BVLFeedbackPanel,[{key:"render",value:function(){var BVLFeedbackItems=this.props.notifications.map(function(notification,i){return React.createElement(BVLFeedbackItem,{URL:notification.URL,key:i,new:notification.new,testDate:notification.testDate,name:notification.name,comment:notification.comment})});return React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading"},React.createElement("h3",{className:"panel-title"},"Behavioural Feedback Notifications"),React.createElement("span",{className:"pull-right clickable glyphicon glyphicon-chevron-up"})),React.createElement("div",{className:"panel-body"},React.createElement("div",{className:"list-group bvl-feedback-item"},BVLFeedbackItems)))}}]),BVLFeedbackPanel}(React.Component),Home=function(_React$Component11){function Home(props){_classCallCheck(this,Home);var _this11=_possibleConstructorReturn(this,(Home.__proto__||Object.getPrototypeOf(Home)).call(this,props));return _this11.state={username:"",lastlogin:"",description:null,links:null,recruitment:null,useProject:!1,totalScans:0,tasks:null,docRepoNotifications:null,bvlFeedbackNotifications:null},_this11}return _inherits(Home,_React$Component11),_createClass(Home,[{key:"componentDidMount",value:function(){$.get(loris.BaseURL+"/dashboard/ajax/getDashboardHomeData.php",function(data,status){"success"===status&&(this.setState({username:data.username,lastlogin:data.lastlogin,description:data.description,links:data.links,recruitment:data.recruitment,useProject:data.useProject,totalScans:data.totalScans,tasks:data.tasks,docRepoNotifications:data.docRepoNotifications,bvlFeedbackNotifications:data.bvlFeedbackNotifications}),dashboardHomeLoad())}.bind(this))}},{key:"render",value:function(){return React.createElement("div",{id:"dashboard",className:"row"},React.createElement("div",{className:"col-lg-8"},React.createElement(WelcomePanel,{username:this.state.username,lastlogin:this.state.lastlogin,description:this.state.description,links:this.state.links}),React.createElement(RecruitmentPanel,{recruitment:this.state.recruitment,useProject:this.state.useProject}),React.createElement(StudyProgressionPanel,{totalScans:this.state.totalScans,recruitment:this.state.recruitment}),React.createElement("small",null,React.createElement("i",null,"Note that the Recruitment and Study Progression charts include data from ineligible, excluded, and consent withdrawn candidates."))),React.createElement("div",{className:"col-lg-4"},this.state.tasks&&React.createElement("div",{className:"col-lg-12 col-md-6 col-sm-6 col-xs-12"},React.createElement(TasksPanel,{tasks:this.state.tasks})),!1,this.state.bvlFeedbackNotifications&&React.createElement("div",{className:"col-lg-12 col-md-6 col-sm-6 col-xs-12"},React.createElement(BVLFeedbackPanel,{notifications:this.state.bvlFeedbackNotifications}))))}}]),Home}(React.Component);exports.default=Home}});
//# sourceMappingURL=Dashboard.js.map