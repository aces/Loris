!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_CandidateInfo=__webpack_require__(3),_CandidateInfo2=_interopRequireDefault(_CandidateInfo),_ProbandInfo=__webpack_require__(5),_ProbandInfo2=_interopRequireDefault(_ProbandInfo),_FamilyInfo=__webpack_require__(6),_FamilyInfo2=_interopRequireDefault(_FamilyInfo),_ParticipantStatus=__webpack_require__(7),_ParticipantStatus2=_interopRequireDefault(_ParticipantStatus),_ConsentStatus=__webpack_require__(8),_ConsentStatus2=_interopRequireDefault(_ConsentStatus),_ExternalIdentifier=__webpack_require__(9),_ExternalIdentifier2=_interopRequireDefault(_ExternalIdentifier),_Tabs=__webpack_require__(10),_ClinicalTrial=__webpack_require__(11),_DiagnosisReappraisal=(_interopRequireDefault(_ClinicalTrial),__webpack_require__(12)),_StudyWithdrawalForm=(_interopRequireDefault(_DiagnosisReappraisal),__webpack_require__(13)),_AdverseEventReport=(_interopRequireDefault(_StudyWithdrawalForm),__webpack_require__(14)),CandidateParameters=(_interopRequireDefault(_AdverseEventReport),function(_React$Component){function CandidateParameters(props){_classCallCheck(this,CandidateParameters);var _this=_possibleConstructorReturn(this,(CandidateParameters.__proto__||Object.getPrototypeOf(CandidateParameters)).call(this,props));return _this.getTabPanes=_this.getTabPanes.bind(_this),_this}return _inherits(CandidateParameters,_React$Component),_createClass(CandidateParameters,[{key:"getTabPanes",value:function(tabList){var actionURL=loris.BaseURL+"/candidate_parameters/ajax/formHandler.php",dataURL=loris.BaseURL+"/candidate_parameters/ajax/getData.php?candID="+this.props.candID,tabPanes=Object.keys(tabList).map(function(key){var TabContent=tabList[key].component;return React.createElement(_Tabs.TabPane,{TabId:tabList[key].id,key:key},React.createElement(TabContent,{action:actionURL,dataURL:dataURL+"&data="+tabList[key].id,tabName:tabList[key].id}))});return tabPanes}},{key:"render",value:function(){var tabList=[{id:"candidateInfo",label:"Candidate Information",component:_CandidateInfo2.default},{id:"participantStatus",label:"Participant Status",component:_ParticipantStatus2.default}];return"true"===loris.config("useProband")&&tabList.push({id:"probandInfo",label:"Proband Information",component:_ProbandInfo2.default}),"true"===loris.config("useFamilyID")&&tabList.push({id:"familyInfo",label:"Family Information",component:_FamilyInfo2.default}),"true"===loris.config("useConsent")&&tabList.push({id:"consentStatus",label:"Consent Status",component:_ConsentStatus2.default}),tabList.push({id:"externalIdentifier",label:"External Identifiers",component:_ExternalIdentifier2.default}),React.createElement("div",null,React.createElement("a",{className:"btn btn-sm btn-primary",href:loris.BaseURL+"/"+this.props.candID,style:{marginBottom:"20px"}},"Return to timepoint list"),React.createElement("br",null),React.createElement(_Tabs.Tabs,{tabs:tabList,defaultTab:"candidateInfo",updateURL:!0},this.getTabPanes(tabList)))}}]),CandidateParameters}(React.Component));CandidateParameters.propTypes={candID:React.PropTypes.string.isRequired};var args=QueryString.get(document.currentScript.src);window.addEventListener("load",function(){var candidateParameters=React.createElement("div",{className:"page-candidate-parameters"},React.createElement(CandidateParameters,{Module:"candidate_parameters",candID:args.candID}));ReactDOM.render(candidateParameters,document.getElementById("lorisworkspace"))})},,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Loader=__webpack_require__(4),_Loader2=_interopRequireDefault(_Loader),CandidateInfo=function(_React$Component){function CandidateInfo(props){_classCallCheck(this,CandidateInfo);var _this=_possibleConstructorReturn(this,(CandidateInfo.__proto__||Object.getPrototypeOf(CandidateInfo)).call(this,props));return _this.state={caveatOptions:{true:"True",false:"False"},Data:{},formData:{},updateResult:null,errorMessage:null,isLoaded:!1,loadedData:0},_this.fetchData=_this.fetchData.bind(_this),_this.setFormData=_this.setFormData.bind(_this),_this.handleSubmit=_this.handleSubmit.bind(_this),_this.showAlertMessage=_this.showAlertMessage.bind(_this),_this}return _inherits(CandidateInfo,_React$Component),_createClass(CandidateInfo,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var _this2=this;$.ajax(this.props.dataURL,{method:"GET",dataType:"json",success:function(data){var formData={flaggedCaveatemptor:data.flagged_caveatemptor,flaggedOther:data.flagged_other,flaggedReason:data.flagged_reason};Object.assign(formData,data.parameter_values),_this2.setState({Data:data,isLoaded:!0,formData:formData})},error:function(_error){console.error(_error),_this2.setState({error:"An error occurred when loading the form!"})}})}},{key:"setFormData",value:function(formElement,value){var formData=JSON.parse(JSON.stringify(this.state.formData));formData[formElement]=value,"flaggedCaveatemptor"===formElement&&"false"===value&&(formData.flaggedReason="",formData.flaggedOther=""),"flaggedReason"===formElement&&"Other"!==this.state.Data.caveatReasonOptions[value]&&(formData.flaggedOther=""),this.setState({formData:formData})}},{key:"handleSubmit",value:function(e){var _this3=this;e.preventDefault();var myFormData=this.state.formData,formData=new FormData;for(var key in myFormData)myFormData.hasOwnProperty(key)&&""!==myFormData[key]&&formData.append(key,myFormData[key]);formData.append("tab",this.props.tabName),formData.append("candID",this.state.Data.candID),$.ajax({type:"POST",url:this.props.action,data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){_this3.setState({updateResult:"success"}),_this3.showAlertMessage()},error:function(_error2){if(""!==_error2.responseText){var errorMessage=JSON.parse(_error2.responseText).message;_this3.setState({updateResult:"error",errorMessage:errorMessage}),_this3.showAlertMessage()}}})}},{key:"showAlertMessage",value:function(){var _this4=this;if(null!==this.refs["alert-message"]){var alertMsg=this.refs["alert-message"];$(alertMsg).fadeTo(2e3,500).delay(3e3).slideUp(500,function(){_this4.setState({updateResult:null})})}}},{key:"render",value:function(){if(!this.state.isLoaded)return React.createElement(_Loader2.default,null);var disabled=!0,updateButton=null;loris.userHasPermission("candidate_parameter_edit")&&(disabled=!1,updateButton=React.createElement(ButtonElement,{label:"Update"}));var reasonDisabled=!0,reasonRequired=!1;"true"===this.state.formData.flaggedCaveatemptor&&(reasonDisabled=!1,reasonRequired=!0);var reasonKey=null,specifyOther=null,otherDisabled=!0,otherRequired=!1;for(var key in this.state.Data.caveatReasonOptions)if(this.state.Data.caveatReasonOptions.hasOwnProperty(key)&&"Other"===this.state.Data.caveatReasonOptions[key]){reasonKey=key;break}this.state.formData.flaggedReason===reasonKey&&(otherRequired=!0,otherDisabled=!1),"false"===this.state.formData.flaggedCaveatemptor&&(reasonDisabled=!0,reasonRequired=!1,otherDisabled=!0,otherRequired=!1),null!==reasonKey&&(specifyOther=React.createElement(TextareaElement,{label:"If Other, please specify",name:"flaggedOther",value:this.state.formData.flaggedOther,onUserInput:this.setFormData,ref:"flaggedOther",disabled:otherDisabled,required:otherRequired}));var extraParameterFields=[],extraParameters=this.state.Data.extra_parameters;for(var key2 in extraParameters)if(extraParameters.hasOwnProperty(key2)){var paramTypeID=extraParameters[key2].ParameterTypeID,name=paramTypeID,value=this.state.formData[paramTypeID];switch(extraParameters[key2].Type.substring(0,3)){case"enu":var types=extraParameters[key2].Type.substring(5);types=types.slice(0,-1),types=types.replace(/'/g,""),types=types.split(",");var selectOptions={};for(var key3 in types)types.hasOwnProperty(key3)&&(selectOptions[types[key3]]=types[key3]);extraParameterFields.push(React.createElement(SelectElement,{label:extraParameters[key2].Description,name:name,options:selectOptions,value:value,onUserInput:this.setFormData,ref:name,disabled:disabled,key:key2}));break;case"dat":extraParameterFields.push(React.createElement(DateElement,{label:extraParameters[key2].Description,name:name,value:value,onUserInput:this.setFormData,ref:name,disabled:disabled,key:key2}));break;default:extraParameterFields.push(React.createElement(TextareaElement,{label:extraParameters[key2].Description,name:name,value:value,onUserInput:this.setFormData,ref:name,disabled:disabled,key:key2}))}}var alertMessage="",alertClass="alert text-center hide";if(this.state.updateResult)if("success"===this.state.updateResult)alertClass="alert alert-success text-center",alertMessage="Update Successful!";else if("error"===this.state.updateResult){var errorMessage=this.state.errorMessage;alertClass="alert alert-danger text-center",alertMessage=errorMessage?errorMessage:"Failed to update!"}return React.createElement("div",{className:"row"},React.createElement("div",{className:alertClass,role:"alert",ref:"alert-message"},alertMessage),React.createElement(FormElement,{name:"candidateInfo",onSubmit:this.handleSubmit,ref:"form",class:"col-md-6"},React.createElement(StaticElement,{label:"PSCID",text:this.state.Data.pscid}),React.createElement(StaticElement,{label:"DCCID",text:this.state.Data.candID}),React.createElement(SelectElement,{label:"Caveat Emptor Flag for Candidate",name:"flaggedCaveatemptor",options:this.state.caveatOptions,value:this.state.formData.flaggedCaveatemptor,onUserInput:this.setFormData,ref:"flaggedCaveatemptor",disabled:disabled,required:!0}),React.createElement(SelectElement,{label:"Reason for Caveat Emptor Flag",name:"flaggedReason",options:this.state.Data.caveatReasonOptions,value:this.state.formData.flaggedReason,onUserInput:this.setFormData,ref:"flaggedReason",disabled:reasonDisabled,required:reasonRequired}),specifyOther,extraParameterFields,updateButton))}}]),CandidateInfo}(React.Component);CandidateInfo.propTypes={dataURL:React.PropTypes.string.isRequired,action:React.PropTypes.string.isRequired,tabName:React.PropTypes.string},exports.default=CandidateInfo},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Loader=function(_React$Component){function Loader(){return _classCallCheck(this,Loader),_possibleConstructorReturn(this,(Loader.__proto__||Object.getPrototypeOf(Loader)).apply(this,arguments))}return _inherits(Loader,_React$Component),_createClass(Loader,[{key:"render",value:function(){return React.createElement("div",{className:"loader",style:{width:this.props.size,height:this.props.size}})}}]),Loader}(React.Component);Loader.propTypes={size:React.PropTypes.int},Loader.defaultProps={size:120},exports.default=Loader},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Loader=__webpack_require__(4),_Loader2=_interopRequireDefault(_Loader),ProbandInfo=function(_React$Component){function ProbandInfo(props){_classCallCheck(this,ProbandInfo);var _this=_possibleConstructorReturn(this,(ProbandInfo.__proto__||Object.getPrototypeOf(ProbandInfo)).call(this,props));return _this.state={genderOptions:{Male:"Male",Female:"Female"},Data:[],formData:{},updateResult:null,errorMessage:null,isLoaded:!1,loadedData:0},_this.fetchData=_this.fetchData.bind(_this),_this.setFormData=_this.setFormData.bind(_this),_this.handleSubmit=_this.handleSubmit.bind(_this),_this.showAlertMessage=_this.showAlertMessage.bind(_this),_this}return _inherits(ProbandInfo,_React$Component),_createClass(ProbandInfo,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var _this2=this;$.ajax(this.props.dataURL,{method:"GET",dataType:"json",success:function(data){var formData={ProbandGender:data.ProbandGender,ProbandDoB:data.ProbandDoB,ProbandDoB2:data.ProbandDoB};Object.assign(formData,data.parameter_values),_this2.setState({formData:formData,Data:data,isLoaded:!0})},error:function(_error){_this2.setState({error:"An error occurred when loading the form!"})}})}},{key:"setFormData",value:function(formElement,value){var formData=JSON.parse(JSON.stringify(this.state.formData));formData[formElement]=value,this.setState({formData:formData})}},{key:"handleSubmit",value:function(e){var _this3=this;e.preventDefault();var myFormData=this.state.formData,today=new Date,dd=today.getDate(),mm=today.getMonth()+1,yyyy=today.getFullYear();dd<10&&(dd="0"+dd),mm<10&&(mm="0"+mm),today=yyyy+"-"+mm+"-"+dd;var dob1=myFormData.ProbandDoB?myFormData.ProbandDoB:null,dob2=myFormData.ProbandDoB2?myFormData.ProbandDoB2:null;if(dob1!==dob2)return void alert("DOB do not match!");if(dob1>today)return void alert("Proband date of birth cannot be later than today!");var formData=new FormData;for(var key in myFormData)""!==myFormData[key]&&formData.append(key,myFormData[key]);formData.append("tab",this.props.tabName),formData.append("candID",this.state.Data.candID),$.ajax({type:"POST",url:this.props.action,data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){_this3.setState({updateResult:"success"}),_this3.showAlertMessage(),_this3.fetchData()},error:function(_error2){if(""!==_error2.responseText){var errorMessage=JSON.parse(_error2.responseText).message;_this3.setState({updateResult:"error",errorMessage:errorMessage}),_this3.showAlertMessage()}}})}},{key:"showAlertMessage",value:function(){var _this4=this;if(null!==this.refs["alert-message"]){var alertMsg=this.refs["alert-message"];$(alertMsg).fadeTo(2e3,500).delay(3e3).slideUp(500,function(){_this4.setState({updateResult:null})})}}},{key:"render",value:function(){if(!this.state.isLoaded)return React.createElement(_Loader2.default,null);var disabled=!0,updateButton=null;loris.userHasPermission("candidate_parameter_edit")&&(disabled=!1,updateButton=React.createElement(ButtonElement,{label:"Update"}));var dobRequired=!1,dob2Required=!1;null!==this.state.formData.ProbandGender&&(dobRequired=!0),null!==this.state.formData.ProbandDoB&&(dob2Required=!0);var extraParameterFields=[],extraParameters=this.state.Data.extra_parameters;for(var key2 in extraParameters)if(extraParameters.hasOwnProperty(key2)){var paramTypeID=extraParameters[key2].ParameterTypeID,name=paramTypeID,value=this.state.formData[paramTypeID];switch(extraParameters[key2].Type.substring(0,3)){case"enu":var types=extraParameters[key2].Type.substring(5);types=types.slice(0,-1),types=types.replace(/'/g,""),types=types.split(",");var selectOptions={};for(var key3 in types)types.hasOwnProperty(key3)&&(selectOptions[types[key3]]=types[key3]);extraParameterFields.push(React.createElement(SelectElement,{label:extraParameters[key2].Description,name:name,options:selectOptions,value:value,onUserInput:this.setFormData,ref:name,disabled:disabled,key:key2}));break;case"dat":extraParameterFields.push(React.createElement(DateElement,{label:extraParameters[key2].Description,name:name,value:value,onUserInput:this.setFormData,ref:name,disabled:disabled,key:key2}));break;default:extraParameterFields.push(React.createElement(TextareaElement,{label:extraParameters[key2].Description,name:name,value:value,onUserInput:this.setFormData,ref:name,disabled:disabled,key:key2}))}}var alertMessage="",alertClass="alert text-center hide";if(this.state.updateResult)if("success"===this.state.updateResult)alertClass="alert alert-success text-center",alertMessage="Update Successful!";else if("error"===this.state.updateResult){var errorMessage=this.state.errorMessage;alertClass="alert alert-danger text-center",alertMessage=errorMessage?errorMessage:"Failed to update!"}return React.createElement("div",{className:"row"},React.createElement("div",{className:alertClass,role:"alert",ref:"alert-message"},alertMessage),React.createElement(FormElement,{name:"probandInfo",onSubmit:this.handleSubmit,ref:"form",class:"col-md-6"},React.createElement(StaticElement,{label:"PSCID",text:this.state.Data.pscid}),React.createElement(StaticElement,{label:"DCCID",text:this.state.Data.candID}),React.createElement(SelectElement,{label:"Proband Gender",name:"ProbandGender",options:this.state.genderOptions,value:this.state.formData.ProbandGender,onUserInput:this.setFormData,ref:"ProbandGender",disabled:disabled,required:!0}),React.createElement(DateElement,{label:"DoB Proband",name:"ProbandDoB",value:this.state.formData.ProbandDoB,onUserInput:this.setFormData,ref:"ProbandDoB",disabled:disabled,required:dobRequired}),React.createElement(DateElement,{label:"Confirm DoB Proband",name:"ProbandDoB2",value:this.state.formData.ProbandDoB2,onUserInput:this.setFormData,ref:"ProbandDoB2",disabled:disabled,required:dob2Required}),React.createElement(StaticElement,{label:"Age Difference (months)",text:this.state.Data.ageDifference.toString()}),extraParameterFields,updateButton))}}]),ProbandInfo}(React.Component);ProbandInfo.propTypes={dataURL:React.PropTypes.string.isRequired,action:React.PropTypes.string.isRequired,tabName:React.PropTypes.string},exports.default=ProbandInfo},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Loader=__webpack_require__(4),_Loader2=_interopRequireDefault(_Loader),FamilyInfo=function(_React$Component){function FamilyInfo(props){_classCallCheck(this,FamilyInfo);var _this=_possibleConstructorReturn(this,(FamilyInfo.__proto__||Object.getPrototypeOf(FamilyInfo)).call(this,props));return _this.state={Data:{},formData:{},familyMembers:[],updateResult:null,errorMessage:null,isLoaded:!1,loadedData:0},_this.fetchData=_this.fetchData.bind(_this),_this.setFormData=_this.setFormData.bind(_this),_this.handleSubmit=_this.handleSubmit.bind(_this),_this.showAlertMessage=_this.showAlertMessage.bind(_this),_this.deleteFamilyMember=_this.deleteFamilyMember.bind(_this),_this}return _inherits(FamilyInfo,_React$Component),_createClass(FamilyInfo,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var _this2=this;$.ajax(this.props.dataURL,{method:"GET",dataType:"json",success:function(data){_this2.setState({Data:data,isLoaded:!0,familyMembers:data.existingFamilyMembers})},error:function(_error){_this2.setState({error:"An error occurred when loading the form!"})}})}},{key:"setFormData",value:function(formElement,value){var formData=this.state.formData;formData[formElement]=value,this.setState({formData:formData})}},{key:"handleSubmit",value:function(e){var _this3=this;e.preventDefault();var myFormData=this.state.formData,formData=new FormData,formRefs=this.refs,familyMembers=this.state.familyMembers,familyMember={};for(var key in myFormData)myFormData.hasOwnProperty(key)&&""!==myFormData[key]&&(familyMember[key]=myFormData[key],formData.append(key,myFormData[key]));formData.append("tab",this.props.tabName),formData.append("candID",this.state.Data.candID),familyMembers.push(familyMember),this.setState({familyMembers:familyMembers}),$.ajax({type:"POST",url:this.props.action,data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){_this3.setState({updateResult:"success",formData:{}}),_this3.showAlertMessage(),Object.keys(formRefs).map(function(ref){formRefs[ref].state&&formRefs[ref].state.value&&(formRefs[ref].state.value="")}),_this3.forceUpdate()},error:function(_error2){var errorMessage=JSON.parse(_error2.responseText).message;_this3.setState({updateResult:"error",errorMessage:errorMessage}),_this3.showAlertMessage()}})}},{key:"showAlertMessage",value:function(){var _this4=this;if(null!==this.refs["alert-message"]){var alertMsg=this.refs["alert-message"];$(alertMsg).fadeTo(2e3,500).delay(3e3).slideUp(500,function(){_this4.setState({updateResult:null})})}}},{key:"deleteFamilyMember",value:function(candID,key,candidateList){var _this5=this,familyMembers=this.state.familyMembers;delete familyMembers[key],candidateList[candID]=candID,this.setState({familyMembers:familyMembers});var myFormData=this.state.formData,formData=new FormData;for(var _key in myFormData)myFormData.hasOwnProperty(_key)&&""!==myFormData[_key]&&formData.append(_key,myFormData[_key]);formData.append("tab","deleteFamilyMember"),formData.append("candID",this.state.Data.candID),formData.append("familyDCCID",candID),$.ajax({type:"POST",url:this.props.action,data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){_this5.setState({updateResult:"success"}),_this5.showAlertMessage()},error:function(_error3){if(""!==_error3.responseText){var errorMessage=JSON.parse(_error3.responseText).message;_this5.setState({updateResult:"error",errorMessage:errorMessage}),_this5.showAlertMessage()}}})}},{key:"render",value:function(){if(!this.state.isLoaded)return React.createElement(_Loader2.default,null);var relationshipOptions={full_sibling:"Full Sibling",half_sibling:"Half Sibling","1st_cousin":"First Cousin"},disabled=!0,addButton=null;loris.userHasPermission("candidate_parameter_edit")&&(disabled=!1,addButton=React.createElement(ButtonElement,{label:"Add"}));var candidateList=this.state.Data.candidates,familyMembers=this.state.familyMembers,familyMembersHTML=[];for(var key in familyMembers)if(familyMembers.hasOwnProperty(key)){var candID=familyMembers[key].FamilyCandID,relationship=familyMembers[key].Relationship_type,link="?candID="+candID+"&identifier="+candID;familyMembersHTML.push(React.createElement("div",{key:key},React.createElement(StaticElement,{label:"Family Member DCCID",text:React.createElement("a",{href:link},candID)}),React.createElement(StaticElement,{label:"Relation Type",text:relationshipOptions[relationship]}),React.createElement(ButtonElement,{label:"Delete",type:"button",onUserInput:this.deleteFamilyMember.bind(null,candID,key,candidateList)}),React.createElement("hr",null))),delete candidateList[candID]}var alertMessage="",alertClass="alert text-center hide";if(this.state.updateResult)if("success"===this.state.updateResult)alertClass="alert alert-success text-center",alertMessage="Update Successful!";else if("error"===this.state.updateResult){var errorMessage=this.state.errorMessage;alertClass="alert alert-danger text-center",alertMessage=errorMessage?errorMessage:"Failed to update!"}return React.createElement("div",{className:"row"},React.createElement("div",{className:alertClass,role:"alert",ref:"alert-message"},alertMessage),React.createElement(FormElement,{name:"familyInfo",onSubmit:this.handleSubmit,ref:"form",class:"col-md-6"},React.createElement(StaticElement,{label:"PSCID",text:this.state.Data.pscid}),React.createElement(StaticElement,{label:"DCCID",text:this.state.Data.candID}),React.createElement("hr",null),familyMembersHTML,React.createElement(SelectElement,{label:"Family Member ID (DCCID)",name:"FamilyCandID",options:candidateList,onUserInput:this.setFormData,ref:"FamilyCandID",disabled:disabled,required:!0,value:this.state.formData.FamilyCandID}),React.createElement(SelectElement,{label:"Relation Type",name:"Relationship_type",options:relationshipOptions,onUserInput:this.setFormData,ref:"Relationship_type",disabled:disabled,required:!0,value:this.state.formData.Relationship_type}),addButton))}}]),FamilyInfo}(React.Component);FamilyInfo.propTypes={dataURL:React.PropTypes.string.isRequired,action:React.PropTypes.string.isRequired,tabName:React.PropTypes.string},exports.default=FamilyInfo},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Loader=__webpack_require__(4),_Loader2=_interopRequireDefault(_Loader),ParticipantStatus=function(_React$Component){
function ParticipantStatus(props){_classCallCheck(this,ParticipantStatus);var _this=_possibleConstructorReturn(this,(ParticipantStatus.__proto__||Object.getPrototypeOf(ParticipantStatus)).call(this,props));return _this.state={Data:[],formData:{},updateResult:null,errorMessage:null,isLoaded:!1,loadedData:0},_this.fetchData=_this.fetchData.bind(_this),_this.setFormData=_this.setFormData.bind(_this),_this.handleSubmit=_this.handleSubmit.bind(_this),_this.showAlertMessage=_this.showAlertMessage.bind(_this),_this}return _inherits(ParticipantStatus,_React$Component),_createClass(ParticipantStatus,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var _this2=this;$.ajax(this.props.dataURL,{method:"GET",dataType:"json",success:function(data){var formData={};formData.participantStatus=data.participantStatus,formData.participantSuboptions=data.participantSuboptions,formData.reasonSpecify=data.reasonSpecify,_this2.setState({Data:data,formData:formData,isLoaded:!0})},error:function(_error){_this2.setState({error:"An error occurred when loading the form!"})}})}},{key:"setFormData",value:function(formElement,value){var formData=this.state.formData,required=this.state.Data.required;"participantStatus"===formElement&&required.indexOf(value)<0&&(formData.participantSuboptions=""),formData[formElement]=value,this.setState({formData:formData})}},{key:"handleSubmit",value:function(e){var _this3=this;e.preventDefault();var myFormData=this.state.formData,formData=new FormData;for(var key in myFormData)myFormData.hasOwnProperty(key)&&""!==myFormData[key]&&null!==myFormData[key]&&void 0!==myFormData[key]&&formData.append(key,myFormData[key]);formData.append("tab",this.props.tabName),formData.append("candID",this.state.Data.candID),$.ajax({type:"POST",url:this.props.action,data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){_this3.setState({updateResult:"success"}),_this3.showAlertMessage(),_this3.fetchData()},error:function(_error2){if(""!==_error2.responseText){var errorMessage=JSON.parse(_error2.responseText).message;_this3.setState({updateResult:"error",errorMessage:errorMessage}),_this3.showAlertMessage()}}})}},{key:"showAlertMessage",value:function(){var _this4=this;if(null!==this.refs["alert-message"]){var alertMsg=this.refs["alert-message"];$(alertMsg).fadeTo(2e3,500).delay(3e3).slideUp(500,function(){_this4.setState({updateResult:null})})}}},{key:"render",value:function(){if(!this.state.isLoaded)return React.createElement(_Loader2.default,null);var disabled=!0,updateButton=null;loris.userHasPermission("candidate_parameter_edit")&&(disabled=!1,updateButton=React.createElement(ButtonElement,{label:"Update"}));var required=this.state.Data.required,subOptions={},suboptionsRequired=!1,participantStatus=this.state.formData.participantStatus?this.state.formData.participantStatus:this.state.Data.participantStatus;participantStatus&&required.indexOf(participantStatus)>-1&&(subOptions=this.state.Data.parentIDs[participantStatus],suboptionsRequired=!0);var formattedHistory=[];for(var statusKey in this.state.Data.history)if(this.state.Data.history.hasOwnProperty(statusKey)){var line="";for(var field in this.state.Data.history[statusKey])if(this.state.Data.history[statusKey].hasOwnProperty(field)){var current=this.state.Data.history[statusKey][field];if(null!==current)switch(field){case"data_entry_date":line+="[",line+=current,line+="] ";break;case"entry_staff":line+=current,line+=" ";break;case"status":line+=" Status: ",line+=current,line+=" ";break;case"suboption":line+="Details: ",line+=current,line+=" ";break;case"reason_specify":line+="Comments: ",line+=current,line+=" "}}formattedHistory.push(React.createElement("p",{key:statusKey},line))}var alertMessage="",alertClass="alert text-center hide";if(this.state.updateResult)if("success"===this.state.updateResult)alertClass="alert alert-success text-center",alertMessage="Update Successful!";else if("error"===this.state.updateResult){var errorMessage=this.state.errorMessage;alertClass="alert alert-danger text-center",alertMessage=errorMessage?errorMessage:"Failed to update!"}return React.createElement("div",{className:"row"},React.createElement("div",{className:alertClass,role:"alert",ref:"alert-message"},alertMessage),React.createElement(FormElement,{name:"participantStatus",onSubmit:this.handleSubmit,ref:"form",class:"col-md-6"},React.createElement(StaticElement,{label:"PSCID",text:this.state.Data.pscid}),React.createElement(StaticElement,{label:"DCCID",text:this.state.Data.candID}),React.createElement(SelectElement,{label:"Participant Status",name:"participantStatus",options:this.state.Data.statusOptions,value:this.state.formData.participantStatus,onUserInput:this.setFormData,ref:"participantStatus",disabled:disabled,required:!0}),React.createElement(SelectElement,{label:"Specify Reason",name:"participantSuboptions",options:subOptions,value:this.state.formData.participantSuboptions,onUserInput:this.setFormData,ref:"participantSuboptions",disabled:!suboptionsRequired,required:suboptionsRequired}),React.createElement(TextareaElement,{label:"Comments",name:"reasonSpecify",value:this.state.formData.reasonSpecify,onUserInput:this.setFormData,ref:"reasonSpecify",disabled:disabled,required:!1}),updateButton,formattedHistory))}}]),ParticipantStatus}(React.Component);ParticipantStatus.propTypes={dataURL:React.PropTypes.string.isRequired,action:React.PropTypes.string.isRequired,tabName:React.PropTypes.string},exports.default=ParticipantStatus},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Loader=__webpack_require__(4),_Loader2=_interopRequireDefault(_Loader),ConsentStatus=function(_React$Component){function ConsentStatus(props){_classCallCheck(this,ConsentStatus);var _this=_possibleConstructorReturn(this,(ConsentStatus.__proto__||Object.getPrototypeOf(ConsentStatus)).call(this,props));return _this.state={consentOptions:{yes:"Yes",no:"No"},Data:[],formData:{},updateResult:null,errorMessage:null,isLoaded:!1,loadedData:0},_this.fetchData=_this.fetchData.bind(_this),_this.setFormData=_this.setFormData.bind(_this),_this.handleSubmit=_this.handleSubmit.bind(_this),_this.showAlertMessage=_this.showAlertMessage.bind(_this),_this}return _inherits(ConsentStatus,_React$Component),_createClass(ConsentStatus,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"fetchData",value:function(){var _this2=this;$.ajax(this.props.dataURL,{method:"GET",dataType:"json",success:function(data){var formData={},consents=data.consents;for(var consentStatus in consents)if(consents.hasOwnProperty(consentStatus)){var consentDate=consentStatus+"_date",consentDate2=consentStatus+"_date2",consentWithdrawal=consentStatus+"_withdrawal",consentWithdrawal2=consentStatus+"_withdrawal2";formData[consentStatus]=data.consentStatuses[consentStatus],formData[consentDate]=data.consentDates[consentStatus],formData[consentDate2]=data.consentDates[consentStatus],formData[consentWithdrawal]=data.withdrawals[consentStatus],formData[consentWithdrawal2]=data.withdrawals[consentStatus]}_this2.setState({Data:data,formData:formData,isLoaded:!0})},error:function(_error){_this2.setState({error:"An error occurred when loading the form!"})}})}},{key:"setFormData",value:function(formElement,value){var formData=this.state.formData;formData[formElement]=value,this.setState({formData:formData})}},{key:"handleSubmit",value:function(e){var _this3=this;e.preventDefault();var myFormData=this.state.formData,today=new Date,dd=today.getDate(),mm=today.getMonth()+1,yyyy=today.getFullYear();dd<10&&(dd="0"+dd),mm<10&&(mm="0"+mm),today=yyyy+"-"+mm+"-"+dd;for(var consentStatus in this.state.Data.consents)if(this.state.Data.consents.hasOwnProperty(consentStatus)){var label=this.state.Data.consents[consentStatus],consentDate=consentStatus+"_date",consentDate2=consentStatus+"_date2",date1=myFormData[consentDate]?myFormData[consentDate]:null,date2=myFormData[consentDate2]?myFormData[consentDate2]:null;if(date1!==date2)return void alert(label+" dates do not match!");if(date1>today)return void alert(label+" date cannot be later than today!");var consentWithdrawal=consentStatus+"_withdrawal",consentWithdrawal2=consentStatus+"_withdrawal2";if(date1=myFormData[consentWithdrawal]?myFormData[consentWithdrawal]:null,date2=myFormData[consentWithdrawal2]?myFormData[consentWithdrawal2]:null,date1!==date2)return void alert(label+" withdrawal dates do not match!");if(date1>today)return void alert(label+" withdrawal date cannot be later than today!")}var formData=new FormData;for(var key in myFormData)""!==myFormData[key]&&formData.append(key,myFormData[key]);formData.append("tab",this.props.tabName),formData.append("candID",this.state.Data.candID),$.ajax({type:"POST",url:this.props.action,data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){_this3.setState({updateResult:"success"}),_this3.showAlertMessage(),_this3.fetchData()},error:function(_error2){if(""!==_error2.responseText){var errorMessage=JSON.parse(_error2.responseText).message;_this3.setState({updateResult:"error",errorMessage:errorMessage}),_this3.showAlertMessage()}}})}},{key:"showAlertMessage",value:function(){var _this4=this;if(null!==this.refs["alert-message"]){var alertMsg=this.refs["alert-message"];$(alertMsg).fadeTo(2e3,500).delay(3e3).slideUp(500,function(){_this4.setState({updateResult:null})})}}},{key:"render",value:function(){if(!this.state.isLoaded)return React.createElement(_Loader2.default,null);var disabled=!0,updateButton=null;loris.userHasPermission("candidate_parameter_edit")&&(disabled=!1,updateButton=React.createElement(ButtonElement,{label:"Update"}));var dateRequired=[],withdrawalRequired=[],i=0;for(var consent in this.state.Data.consents)if(this.state.Data.consents.hasOwnProperty(consent)){var withdrawal=consent+"_withdrawal";"yes"===this.state.formData[consent]&&(dateRequired[i]=!0),this.state.formData[withdrawal]?withdrawalRequired[i]=!0:withdrawalRequired[i]=!1,i++}var consents=[];i=0;for(var consentStatus in this.state.Data.consents)if(this.state.Data.consents.hasOwnProperty(consentStatus)){var label=this.state.Data.consents[consentStatus],consentDate=consentStatus+"_date",consentDate2=consentStatus+"_date2",consentDateLabel="Date of "+label,consentDateConfirmationLabel="Confirmation Date of "+label,consentWithdrawal=consentStatus+"_withdrawal",consentWithdrawal2=consentStatus+"_withdrawal2",consentWithdrawalLabel="Date of Withdrawal of "+label,consentWithdrawalConfirmationLabel="Confirmation Date of Withdrawal of "+label,_consent=React.createElement("div",{key:i},React.createElement(SelectElement,{label:label,name:consentStatus,options:this.state.consentOptions,value:this.state.formData[consentStatus],onUserInput:this.setFormData,ref:consentStatus,disabled:disabled,required:!1}),React.createElement(DateElement,{label:consentDateLabel,name:consentDate,value:this.state.formData[consentDate],onUserInput:this.setFormData,ref:consentDate,disabled:disabled,required:dateRequired[i]}),React.createElement(DateElement,{label:consentDateConfirmationLabel,name:consentDate2,value:this.state.formData[consentDate2],onUserInput:this.setFormData,ref:consentDate2,disabled:disabled,required:dateRequired[i]}),React.createElement(DateElement,{label:consentWithdrawalLabel,name:consentWithdrawal,value:this.state.formData[consentWithdrawal],onUserInput:this.setFormData,ref:consentWithdrawal,disabled:disabled,required:!1}),React.createElement(DateElement,{label:consentWithdrawalConfirmationLabel,name:consentWithdrawal2,value:this.state.formData[consentWithdrawal2],onUserInput:this.setFormData,ref:consentWithdrawal2,disabled:disabled,required:withdrawalRequired[i]}),React.createElement("hr",null));consents.push(_consent),i++}var formattedHistory=[];for(var consentKey in this.state.Data.history)if(this.state.Data.history.hasOwnProperty(consentKey)){var consentLabel=this.state.Data.history[consentKey].label,consentType=this.state.Data.history[consentKey].consentType;for(var field in this.state.Data.history[consentKey])if(this.state.Data.history[consentKey].hasOwnProperty(field)){var line="",historyConsent=this.state.Data.history[consentKey][field];for(var field2 in historyConsent)if(historyConsent.hasOwnProperty(field2)){var current=historyConsent[field2];if(null!==current)switch(field2){case"data_entry_date":line+="[",line+=current,line+="] ";break;case"entry_staff":line+=current,line+=" ";break;case consentType:line+=consentLabel+" Status: ",line+=current,line+=" ";break;case consentType+"_date":line+="Date of Consent: ",line+=current,line+=" ";break;case consentType+"_withdrawal":line+="Date of Consent Withdrawal: ",line+=current,line+=" "}}formattedHistory.push(React.createElement("p",{key:field},line))}}var alertMessage="",alertClass="alert text-center hide";if(this.state.updateResult)if("success"===this.state.updateResult)alertClass="alert alert-success text-center",alertMessage="Update Successful!";else if("error"===this.state.updateResult){var errorMessage=this.state.errorMessage;alertClass="alert alert-danger text-center",alertMessage=errorMessage?errorMessage:"Failed to update!"}return React.createElement("div",{className:"row"},React.createElement("div",{className:alertClass,role:"alert",ref:"alert-message"},alertMessage),React.createElement(FormElement,{name:"consentStatus",onSubmit:this.handleSubmit,ref:"form",class:"col-md-6"},React.createElement(StaticElement,{label:"PSCID",text:this.state.Data.pscid}),React.createElement(StaticElement,{label:"DCCID",text:this.state.Data.candID}),consents,updateButton,formattedHistory))}}]),ConsentStatus}(React.Component);ConsentStatus.propTypes={dataURL:React.PropTypes.string.isRequired,action:React.PropTypes.string.isRequired,tabName:React.PropTypes.string},exports.default=ConsentStatus},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ExternalIdentifier=React.createClass({displayName:"ExternalIdentifier",getInitialState:function(){return{Data:[],formData:{},existingStudies:[],updateResult:null,errorMessage:null,isLoaded:!1,loadedData:0}},componentDidMount:function(){this.fetchData()},fetchData:function(){var that=this;$.ajax(this.props.dataURL,{dataType:"json",xhr:function xhr(){var xhr=new window.XMLHttpRequest;return xhr.addEventListener("progress",function(evt){that.setState({loadedData:evt.loaded})}),xhr},success:function(data){that.setState({Data:data,isLoaded:!0,existingStudies:data.existingStudies})},error:function(data,errorCode,errorMsg){that.setState({error:"An error occurred when loading the form!"})}})},setFormData:function(formElement,value){var formData=this.state.formData;formData[formElement]=value,this.setState({formData:formData})},onSubmit:function(e){e.preventDefault()},render:function(){if(!this.state.isLoaded)return void 0!==this.state.error?React.createElement("div",{className:"alert alert-danger text-center"},React.createElement("strong",null,this.state.error)):React.createElement("button",{className:"btn-info has-spinner"},"Loading",React.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}));var studyOptions=this.state.Data.allStudies,disabled=!0,addButton=null;loris.userHasPermission("candidate_parameter_edit")&&(disabled=!1,addButton=React.createElement(ButtonElement,{label:"Add"}));var existingStudies=this.state.existingStudies,existingStudiesHTML=[];for(var key in existingStudies)if(existingStudies.hasOwnProperty(key)){var PName=studyOptions[existingStudies[key].ProjectID],PID=existingStudies[key].ProjectID,ESID=existingStudies[key].ExtStudyID;existingStudiesHTML.push(React.createElement("div",null,React.createElement(StaticElement,{label:"Study",text:PName}),React.createElement(StaticElement,{label:"External Study Identifier",text:ESID}),React.createElement(ButtonElement,{label:"Delete",type:"button",onUserInput:this.deleteExternalIdentifier.bind(null,PID,key)}),React.createElement("hr",null)))}var IDRequired=!1;this.state.formData.ProjectID&&(IDRequired=!0);var ProjectRequired=!0,alertMessage="",alertClass="alert text-center hide";if(this.state.updateResult)if("success"===this.state.updateResult)alertClass="alert alert-success text-center",alertMessage="Update Successful!";else if("error"===this.state.updateResult){var errorMessage=this.state.errorMessage;alertClass="alert alert-danger text-center",alertMessage=errorMessage?errorMessage:"Failed to update!"}return React.createElement("div",{className:"row"},React.createElement(FormElement,{name:"externalIdentifier",onSubmit:this.handleSubmit,ref:"form",class:"col-md-6"},React.createElement(StaticElement,{label:"PSCID",text:this.state.Data.pscid}),React.createElement(StaticElement,{label:"DCCID",text:this.state.Data.candID}),React.createElement("hr",null),existingStudiesHTML,React.createElement("div",{className:alertClass,role:"alert",ref:"alert-message"},alertMessage),React.createElement(SelectElement,{label:"Study",name:"ProjectID",options:studyOptions,onUserInput:this.setFormData,ref:"ProjectID",disabled:disabled,required:ProjectRequired,value:this.state.formData.ProjectID}),React.createElement(TextboxElement,{label:"External Study Identifier",name:"ExtStudyID",onUserInput:this.setFormData,ref:"ExtStudyID",disabled:disabled,required:IDRequired,value:this.state.formData.ExtStudyID}),addButton))},handleSubmit:function(e){e.preventDefault();var myFormData=this.state.formData,self=this,formData=new FormData,formRefs=this.refs,existingStudies=this.state.existingStudies,existingStudy={};for(var key in myFormData)myFormData.hasOwnProperty(key)&&""!==myFormData[key]&&(existingStudy[key]=myFormData[key],formData.append(key,myFormData[key]));formData.append("tab",this.props.tabName),formData.append("candID",this.state.Data.candID),existingStudies.push(existingStudy),this.setState({existingStudies:existingStudies}),$.ajax({type:"POST",url:self.props.action,data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){self.setState({updateResult:"success",formData:{}}),self.showAlertMessage(),self.fetchData(),Object.keys(formRefs).map(function(ref){formRefs[ref].state&&formRefs[ref].state.value&&(formRefs[ref].state.value="")}),self.forceUpdate()},error:function(err){if(""!==err.responseText){var errorMessage=JSON.parse(err.responseText).message;self.setState({updateResult:"error",errorMessage:errorMessage}),self.showAlertMessage()}else{var errorMessage="ERROR: Contact Administrator";self.setState({updateResult:"error",errorMessage:errorMessage}),self.showAlertMessage()}}})},showAlertMessage:function(){var self=this;if(null!==this.refs["alert-message"]){var alertMsg=this.refs["alert-message"];$(alertMsg).fadeTo(2e3,500).delay(3e3).slideUp(500,function(){self.setState({updateResult:null})})}},deleteExternalIdentifier:function(PID,key){var existingStudies=this.state.existingStudies;delete existingStudies[key],this.setState({existingStudies:existingStudies});var myFormData=this.state.formData,self=this,formData=new FormData;for(var _key in myFormData)myFormData.hasOwnProperty(_key)&&""!==myFormData[_key]&&myFormData[_key]&&formData.append(_key,myFormData[_key]);formData.append("tab","deleteExternalIdentifier"),formData.append("candID",this.state.Data.candID),formData.append("project",PID),$.ajax({type:"POST",url:self.props.action,data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){self.setState({updateResult:"success"}),self.showAlertMessage()},error:function(err){if(""!==err.responseText){var errorMessage=JSON.parse(err.responseText).message;self.setState({updateResult:"error",errorMessage:errorMessage}),self.showAlertMessage()}else{var errorMessage="ERROR: Contact Administrator";self.setState({updateResult:"error",errorMessage:errorMessage}),self.showAlertMessage()}}})}}),RExternalIdentifier=React.createFactory(ExternalIdentifier);window.ExternalIdentifier=ExternalIdentifier,window.RExternalIdentifier=RExternalIdentifier,exports.default=ExternalIdentifier},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Tabs=function(_React$Component){function Tabs(props){_classCallCheck(this,Tabs);var _this=_possibleConstructorReturn(this,(Tabs.__proto__||Object.getPrototypeOf(Tabs)).call(this,props)),hash=window.location.hash,activeTab="";return _this.props.updateURL&&hash?activeTab=hash.substr(1):_this.props.defaultTab?activeTab=_this.props.defaultTab:_this.props.tabs.length>0&&(activeTab=_this.props.tabs[0].id),_this.state={activeTab:activeTab},_this.handleClick=_this.handleClick.bind(_this),_this.getTabs=_this.getTabs.bind(_this),_this.getTabPanes=_this.getTabPanes.bind(_this),_this}return _inherits(Tabs,_React$Component),_createClass(Tabs,[{key:"handleClick",value:function(tabId,e){if(this.setState({activeTab:tabId}),this.props.onTabChange(tabId),this.props.updateURL){var scrollDistance=$("body").scrollTop()||$("html").scrollTop();window.location.hash=e.target.hash,$("html,body").scrollTop(scrollDistance)}}},{key:"getTabs",value:function(){var tabs=this.props.tabs.map(function(tab){var tabClass=this.state.activeTab===tab.id?"active":null,href="#"+tab.id,tabID="tab-"+tab.id;return React.createElement("li",{role:"presentation",className:tabClass,key:tab.id},React.createElement("a",{id:tabID,href:href,role:"tab","data-toggle":"tab",onClick:this.handleClick.bind(null,tab.id)},tab.label))}.bind(this));return tabs}},{key:"getTabPanes",value:function(){var tabPanes=React.Children.map(this.props.children,function(child,key){if(child)return React.cloneElement(child,{activeTab:this.state.activeTab,key:key})}.bind(this));return tabPanes}},{key:"render",value:function(){var tabs=this.getTabs(),tabPanes=this.getTabPanes(),tabStyle={marginLeft:0,marginBottom:"5px"};return React.createElement("div",null,React.createElement("ul",{className:"nav nav-tabs",role:"tablist",style:tabStyle},tabs),React.createElement("div",{className:"tab-content"},tabPanes))}}]),Tabs}(React.Component);Tabs.propTypes={tabs:React.PropTypes.array.isRequired,defaultTab:React.PropTypes.string,updateURL:React.PropTypes.bool},Tabs.defaultProps={onTabChange:function(){},updateURL:!0};var VerticalTabs=function(_React$Component2){function VerticalTabs(props){_classCallCheck(this,VerticalTabs);var _this2=_possibleConstructorReturn(this,(VerticalTabs.__proto__||Object.getPrototypeOf(VerticalTabs)).call(this,props)),hash=window.location.hash,activeTab="";return _this2.props.updateURL&&hash?activeTab=hash.substr(1):_this2.props.defaultTab?activeTab=_this2.props.defaultTab:_this2.props.tabs.length>0&&(activeTab=_this2.props.tabs[0].id),_this2.state={activeTab:activeTab},_this2.handleClick=_this2.handleClick.bind(_this2),_this2.getTabs=_this2.getTabs.bind(_this2),_this2.getTabPanes=_this2.getTabPanes.bind(_this2),_this2}return _inherits(VerticalTabs,_React$Component2),_createClass(VerticalTabs,[{key:"handleClick",value:function(tabId,e){if(this.setState({activeTab:tabId}),this.props.onTabChange(tabId),this.props.updateURL){var scrollDistance=$("body").scrollTop()||$("html").scrollTop();window.location.hash=e.target.hash,$("html,body").scrollTop(scrollDistance)}}},{key:"getTabs",value:function(){var tabs=this.props.tabs.map(function(tab){var tabClass=this.state.activeTab===tab.id?"active":null,href="#"+tab.id,tabID="tab-"+tab.id;return React.createElement("li",{role:"presentation",className:tabClass,key:tab.id},React.createElement("a",{id:tabID,href:href,role:"tab","data-toggle":"tab",onClick:this.handleClick.bind(null,tab.id)},tab.label))}.bind(this));return tabs}},{key:"getTabPanes",value:function(){var tabPanes=React.Children.map(this.props.children,function(child,key){if(child)return React.cloneElement(child,{activeTab:this.state.activeTab,key:key})}.bind(this));return tabPanes}},{key:"render",value:function(){var tabs=this.getTabs(),tabPanes=this.getTabPanes(),tabStyle={marginLeft:0,marginBottom:"5px"};return React.createElement("div",null,React.createElement("div",{className:"tabbable col-md-3 col-sm-3"},React.createElement("ul",{className:"nav nav-pills nav-stacked",role:"tablist",style:tabStyle},tabs)),React.createElement("div",{className:"tab-content col-md-9 col-sm-9"},tabPanes))}}]),VerticalTabs}(React.Component);VerticalTabs.propTypes={tabs:React.PropTypes.array.isRequired,defaultTab:React.PropTypes.string,updateURL:React.PropTypes.bool},VerticalTabs.defaultProps={onTabChange:function(){},updateURL:!0};var TabPane=function(_React$Component3){function TabPane(){return _classCallCheck(this,TabPane),_possibleConstructorReturn(this,(TabPane.__proto__||Object.getPrototypeOf(TabPane)).apply(this,arguments))}return _inherits(TabPane,_React$Component3),_createClass(TabPane,[{key:"render",value:function(){var classList="tab-pane",title=void 0;return this.props.TabId===this.props.activeTab&&(classList+=" active"),this.props.Title&&(title=React.createElement("h1",null,this.props.Title)),React.createElement("div",{role:"tabpanel",className:classList,id:this.props.TabId},title,this.props.children)}}]),TabPane}(React.Component);TabPane.propTypes={TabId:React.PropTypes.string.isRequired,Title:React.PropTypes.string,activeTab:React.PropTypes.string},exports.Tabs=Tabs,exports.VerticalTabs=VerticalTabs,exports.TabPane=TabPane},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ClinicalTrial=React.createClass({displayName:"ClinicalTrial",getInitialState:function(){return{Data:[],formData:{},existingTrials:[],updateResult:null,errorMessage:null,isLoaded:!1,loadedData:0}},componentDidMount:function(){this.fetchData()},fetchData:function(){var that=this;$.ajax(this.props.dataURL,{dataType:"json",xhr:function xhr(){var xhr=new window.XMLHttpRequest;return xhr.addEventListener("progress",function(evt){that.setState({loadedData:evt.loaded})}),xhr},success:function(data){that.setState({Data:data,isLoaded:!0,existingTrials:data.existingTrials})},error:function(data,errorCode,errorMsg){that.setState({error:"An error occurred when loading the form!"})}})},setFormData:function(formElement,value){var formData=this.state.formData;formData[formElement]=value,this.setState({formData:formData})},onSubmit:function(e){e.preventDefault()},render:function(){if(!this.state.isLoaded)return void 0!==this.state.error?React.createElement("div",{className:"alert alert-danger text-center"},React.createElement("strong",null,this.state.error)):React.createElement("button",{className:"btn-info has-spinner"},"Loading",React.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}));var disabled=!0,addButton=null;loris.userHasPermission("candidate_parameter_edit")&&(disabled=!1,addButton=React.createElement(ButtonElement,{label:"Add"}));var existingTrials=this.state.existingTrials,existingTrialsHTML=[];for(var key in existingTrials)if(existingTrials.hasOwnProperty(key)){var TName=existingTrials[key].TrialName,TInfo=existingTrials[key].TrialInfo,TID=existingTrials[key].TrialID,TDate=existingTrials[key].DateRegistered;existingTrialsHTML.push(React.createElement("div",null,React.createElement(StaticElement,{label:"Trial Name",text:TName}),React.createElement(StaticElement,{label:"DOI or Identifier",text:TID}),React.createElement(StaticElement,{label:"Date Registered",text:TDate}),React.createElement(StaticElement,{label:"Additional Information",text:TInfo}),React.createElement(ButtonElement,{label:"Delete",type:"button",onUserInput:this.deleteClinicalTrial.bind(null,TName,key)}),React.createElement("hr",null)))}var InfoRequired=!1;this.state.formData.TrialName&&(InfoRequired=!0);var NameRequired=!0,alertMessage="",alertClass="alert text-center hide";if(this.state.updateResult)if("success"===this.state.updateResult)alertClass="alert alert-success text-center",alertMessage="Update Successful!";else if("error"===this.state.updateResult){var errorMessage=this.state.errorMessage;alertClass="alert alert-danger text-center",alertMessage=errorMessage?errorMessage:"Failed to update!"}return React.createElement("div",{className:"row"},React.createElement(FormElement,{name:"clinicalTrial",onSubmit:this.handleSubmit,ref:"form",class:"col-md-6"},React.createElement(StaticElement,{label:"PSCID",text:this.state.Data.pscid}),React.createElement(StaticElement,{label:"DCCID",text:this.state.Data.candID}),React.createElement("hr",null),existingTrialsHTML,React.createElement("div",{className:alertClass,role:"alert",ref:"alert-message"},alertMessage),React.createElement(TextboxElement,{label:"Trial Name",name:"TrialName",onUserInput:this.setFormData,ref:"TrialName",disabled:disabled,required:NameRequired,value:this.state.formData.TrialName}),React.createElement(TextboxElement,{label:"DOI or Identifier",name:"TrialID",onUserInput:this.setFormData,ref:"TrialID",disabled:disabled,required:!1,value:this.state.formData.TrialID}),React.createElement(DateElement,{label:"Date Registered",name:"DateRegistered",value:this.state.formData.DateRegistered,onUserInput:this.setFormData,ref:"DateRegistered",disabled:disabled,required:!1}),React.createElement(TextareaElement,{label:"Additional Information",name:"TrialInfo",onUserInput:this.setFormData,ref:"TrialInfo",disabled:disabled,required:InfoRequired,value:this.state.formData.TrialInfo}),addButton))},handleSubmit:function(e){e.preventDefault();
var myFormData=this.state.formData,self=this,formData=new FormData,formRefs=this.refs,existingTrials=this.state.existingTrials,existingTrial={};for(var key in myFormData)myFormData.hasOwnProperty(key)&&""!==myFormData[key]&&(existingTrial[key]=myFormData[key],formData.append(key,myFormData[key]));formData.append("tab",this.props.tabName),formData.append("candID",this.state.Data.candID),existingTrials.push(existingTrial),this.setState({existingTrials:existingTrials}),$.ajax({type:"POST",url:self.props.action,data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){self.setState({updateResult:"success",formData:{}}),self.showAlertMessage(),self.fetchData(),Object.keys(formRefs).map(function(ref){formRefs[ref].state&&formRefs[ref].state.value&&(formRefs[ref].state.value="")}),self.forceUpdate()},error:function(err){if(""!==err.responseText){var errorMessage=JSON.parse(err.responseText).message;self.setState({updateResult:"error",errorMessage:errorMessage}),self.showAlertMessage()}else{var errorMessage="ERROR: Contact Administrator";self.setState({updateResult:"error",errorMessage:errorMessage}),self.showAlertMessage()}}})},showAlertMessage:function(){var self=this;if(null!==this.refs["alert-message"]){var alertMsg=this.refs["alert-message"];$(alertMsg).fadeTo(2e3,500).delay(3e3).slideUp(500,function(){self.setState({updateResult:null})})}},deleteClinicalTrial:function(TName,key){var existingTrials=this.state.existingTrials;delete existingTrials[key],this.setState({existingTrials:existingTrials});var myFormData=this.state.formData,self=this,formData=new FormData;for(var _key in myFormData)myFormData.hasOwnProperty(_key)&&""!==myFormData[_key]&&myFormData[_key]&&formData.append(_key,myFormData[_key]);formData.append("tab","deleteClinicalTrial"),formData.append("candID",this.state.Data.candID),formData.append("trial",TName),$.ajax({type:"POST",url:self.props.action,data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){self.setState({updateResult:"success"}),self.showAlertMessage()},error:function(err){if(""!==err.responseText){var errorMessage=JSON.parse(err.responseText).message;self.setState({updateResult:"error",errorMessage:errorMessage}),self.showAlertMessage()}else{var errorMessage="ERROR: Contact Administrator";self.setState({updateResult:"error",errorMessage:errorMessage}),self.showAlertMessage()}}})}}),RClinicalTrial=React.createFactory(ClinicalTrial);window.ClinicalTrial=ClinicalTrial,window.RClinicalTrial=RClinicalTrial,exports.default=ClinicalTrial},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},DiagnosisReappraisal=React.createClass({displayName:"DiagnosisReappraisal",getInitialState:function(){return{Data:[],formData:{},updateResult:null,errorMessage:null,isLoaded:!1,disclaimerMessage:null,loadedData:0}},componentDidMount:function(){this.fetchData()},fetchData:function(){var that=this;$.ajax(this.props.dataURL,{dataType:"json",xhr:function xhr(){var xhr=new window.XMLHttpRequest;return xhr.addEventListener("progress",function(evt){that.setState({loadedData:evt.loaded})}),xhr},success:function(data){that.setState({Data:data,formData:data.latestValues,baseValues:JSON.parse(JSON.stringify(data.latestValues)),isLoaded:!0})},error:function(data,errorCode,errorMsg){that.setState({error:"An error occurred when loading the form!"})}})},setFormData:function(formElement,value){var formData=this.state.formData,diagnosisOptions=this.state.Data.diagnosisOptions;formData[formElement]=value,"Diagnosis"==formElement&&(this.changeDisclaimer(value),"FTD"!=diagnosisOptions[value]&&(formData.FTDVariant="",formData.PPAVariant="")),"FTDVariant"==formElement&&"PPA"!=value&&(formData.PPAVariant=""),this.setState({formData:formData})},changeDisclaimer:function(val){var discData=this.state.Data.disclaimerData,diagnosisOptions=this.state.Data.diagnosisOptions,number=0,list="";for(var sub in discData)discData.hasOwnProperty(sub)&&sub!=diagnosisOptions[val]&&(""!=list&&(list+=", "),number+=Object.keys(discData[sub]).length,list+=discData[sub].join(", "));""!==list&&(list="("+list+")");var disclaimer="This candidate has "+number+" visits completed with a different diagnosis. "+list;this.setState({disclaimerMessage:disclaimer})},onSubmit:function(e){e.preventDefault()},render:function(){if(!this.state.isLoaded)return void 0!==this.state.error?React.createElement("div",{className:"alert alert-danger text-center"},React.createElement("strong",null,this.state.error)):React.createElement("button",{className:"btn-info has-spinner"},"Loading",React.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}));var disabled=!0,updateButton=null;loris.userHasPermission("candidate_parameter_edit")&&(disabled=!1,updateButton=React.createElement(ButtonElement,{label:"Update"}));var yesnoOptions={yes:"yes",no:"no"},diagnosisOptions=this.state.Data.diagnosisOptions,ftdOptions=this.state.Data.ftdOptions,ppaOptions=this.state.Data.ppaOptions,disclaimerMessage=this.state.disclaimerMessage,disclaimer=[];disclaimerMessage&&""!==disclaimerMessage&&disclaimer.push(React.createElement("div",null,React.createElement("p",{className:"disclaimer"},React.createElement("strong",null,disclaimerMessage))));var formattedHistory=[];for(var row in this.state.Data.history)if(this.state.Data.history.hasOwnProperty(row)){var lineInfo="",historyRow=this.state.Data.history[row],userH=historyRow.entry_staff,updateDateH=historyRow.DateInserted;lineInfo+="[UPDATE by ",lineInfo+=userH,lineInfo+=" at ",lineInfo+=updateDateH,lineInfo+="]",formattedHistory.push(React.createElement("tr",null,React.createElement("td",{style:{padding:"1px",width:"25%"}},React.createElement("i",null,lineInfo)),React.createElement("td",null,React.createElement("b",null,React.createElement("u",null,"Field"))),React.createElement("td",null,React.createElement("b",null,React.createElement("u",null,"Value")))));for(var changedField in historyRow)historyRow.hasOwnProperty(changedField)&&"entry_staff"!==changedField&&"DateInserted"!==changedField&&formattedHistory.push(React.createElement("tr",null,React.createElement("td",null),React.createElement("td",null,React.createElement("b",null,changedField,": ")),React.createElement("td",null,historyRow[changedField])))}var alertMessage="",alertClass="alert text-center hide";if(this.state.updateResult)if("success"===this.state.updateResult)alertClass="alert alert-success text-center",alertMessage="Update Successful!";else if("error"===this.state.updateResult){var errorMessage=this.state.errorMessage;alertClass="alert alert-danger text-center",alertMessage=errorMessage?errorMessage:"Failed to update!"}var ftdReq=!1,ppaReq=!1,commentReq=!1;return"FTD"==diagnosisOptions[this.state.formData.Diagnosis]&&(ftdReq=!0),"PPA"==this.state.formData.FTDVariant&&(ppaReq=!0),"yes"==this.state.formData.ClinicalDiff&&(commentReq=!0),React.createElement("div",{class:"row"},disclaimer,React.createElement(FormElement,{name:"diagnosisReappraisal",onSubmit:this.handleSubmit,ref:"form",class:"col-md-8"},React.createElement(StaticElement,{label:"PSCID",text:this.state.Data.pscid}),React.createElement(StaticElement,{label:"DCCID",text:this.state.Data.candID}),React.createElement(SelectElement,{label:"Final Diagnosis",name:"Diagnosis",options:diagnosisOptions,value:this.state.formData.Diagnosis,onUserInput:this.setFormData,ref:"Diagnosis",disabled:disabled,required:!0}),React.createElement(SelectElement,{label:"FTD Variant",name:"FTDVariant",options:ftdOptions,value:this.state.formData.FTDVariant,onUserInput:this.setFormData,ref:"FTDVariant",disabled:!ftdReq||disabled,required:ftdReq}),React.createElement(SelectElement,{label:"PPA Variant",name:"PPAVariant",options:ppaOptions,value:this.state.formData.PPAVariant,onUserInput:this.setFormData,ref:"PPAVariant",disabled:!ppaReq||disabled,required:ppaReq}),React.createElement(SelectElement,{label:"Is this a change from the diagnosis obtained at the end of the clinical visit?",name:"ClinicalDiff",options:yesnoOptions,value:this.state.formData.ClinicalDiff,onUserInput:this.setFormData,ref:"ClinicalDiff",disabled:disabled,required:!0}),React.createElement(TextareaElement,{label:"If YES, please comment on how the diagnosis was arrived at and why the diagnosis was changed (e.g., MRI showed extensive white matter disease, diagnosis changed from MCI toV-MCI, etc.):",name:"Comment",value:this.state.formData.Comment,onUserInput:this.setFormData,ref:"Comment",disabled:!commentReq||disabled,required:commentReq}),React.createElement(SelectElement,{label:"The FINAL diagnosis was evaluated by:",name:"Examiner",options:this.state.Data.examiners,value:this.state.formData.Examiner,onUserInput:this.setFormData,ref:"Examiner",disabled:disabled,required:!0}),React.createElement(DateElement,{label:"Date of Completion",name:"DateRegistered",value:this.state.formData.DateRegistered,onUserInput:this.setFormData,ref:"DateRegistered",disabled:disabled,required:!0}),updateButton,React.createElement("div",{className:alertClass,role:"alert",ref:"alert-message"},alertMessage),React.createElement("table",{className:"table-hist"},formattedHistory)))},isEquivalent:function(a,b){if(!a||!b)return!a&&!b&&a==b;var aProps=Object.getOwnPropertyNames(a),bProps=Object.getOwnPropertyNames(b);if(aProps.length!=bProps.length)return!1;for(var i=0;i<aProps.length;i++){var propName=aProps[i];if("object"===_typeof(a[propName])){if(!this.isEquivalent(a[propName],b[propName]))return!1}else if(a[propName]!==b[propName])return!1}return!0},handleSubmit:function(e){e.preventDefault();var equivalentForm=this.isEquivalent(this.state.formData,this.state.baseValues);if(!equivalentForm){this.state.baseValues=JSON.parse(JSON.stringify(this.state.Data.latestValues));var myFormData=this.state.formData,self=this,formData=new FormData;for(var key in myFormData)""!==myFormData[key]&&myFormData[key]&&formData.append(key,myFormData[key]);formData.append("tab",this.props.tabName),formData.append("candID",this.state.Data.candID),$.ajax({type:"POST",url:self.props.action,data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){self.setState({updateResult:"success"}),self.showAlertMessage(),self.fetchData()},error:function(err){if(""!==err.responseText){var errorMessage=JSON.parse(err.responseText).message;self.setState({updateResult:"error",errorMessage:errorMessage}),self.showAlertMessage()}}})}},showAlertMessage:function(){var self=this;if(null!==this.refs["alert-message"]){var alertMsg=this.refs["alert-message"];$(alertMsg).fadeTo(2e3,500).delay(3e3).slideUp(500,function(){self.setState({updateResult:null})})}}}),RDiagnosisReappraisal=React.createFactory(DiagnosisReappraisal);window.DiagnosisReappraisal=DiagnosisReappraisal,window.RDiagnosisReappraisal=RDiagnosisReappraisal,exports.default=DiagnosisReappraisal},function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},StudyWithdrawalForm=React.createClass({displayName:"StudyWithdrawalForm",getInitialState:function(){return{Data:[],formData:{},updateResult:null,errorMessage:null,isLoaded:!1,disclaimerMessage:null,loadedData:0}},componentDidMount:function(){this.fetchData()},fetchData:function(){var that=this;$.ajax(this.props.dataURL,{dataType:"json",xhr:function xhr(){var xhr=new window.XMLHttpRequest;return xhr.addEventListener("progress",function(evt){that.setState({loadedData:evt.loaded})}),xhr},success:function(data){if(null==data.consentWithdrawalDate&&"true"===loris.config("useConsent"))var disclaimer="Please fill out Consent Status page before completing the form below.";else if(""!=data.withdrawalDate&&data.withdrawalDate!=data.consentWithdrawalDate)var disclaimer="Date of Withdrawal does not match date in Consent Status.";that.setState({Data:data,formData:data.latestValues,baseValues:JSON.parse(JSON.stringify(data.latestValues)),isLoaded:!0,disclaimerMessage:disclaimer})},error:function(data,errorCode,errorMsg){that.setState({error:"An error occurred when loading the form!"})}})},setFormData:function(formElement,value){var formData=this.state.formData;formData[formElement]=value,"WithdrawalDate"==formElement&&this.changeDisclaimer(value),"Withdrawal"==formElement&&"full"==value&&(formData.PartialWithdrawal=null),this.setState({formData:formData})},changeDisclaimer:function(val){var consentWithdrawalDate=this.state.Data.consentWithdrawalDate;if(consentWithdrawalDate){if(consentWithdrawalDate!=val)var invalidDate="Date of Withdrawal does not match date in Consent Status."}else var invalidDate="Please fill out Consent Status.";var disclaimer=invalidDate;this.setState({disclaimerMessage:disclaimer})},onSubmit:function(e){e.preventDefault()},render:function(){if(!this.state.isLoaded)return void 0!==this.state.error?React.createElement("div",{className:"alert alert-danger text-center"},React.createElement("strong",null,this.state.error)):React.createElement("button",{className:"btn-info has-spinner"},"Loading",React.createElement("span",{className:"glyphicon glyphicon-refresh\r glyphicon-refresh-animate"}));var disabled=!0,updateButton=null;loris.userHasPermission("candidate_parameter_edit")&&(disabled=!1,this.isEquivalent(this.state.formData,this.state.baseValues)||(updateButton=React.createElement(ButtonElement,{label:"Update"})));var yesNoOptions={yes:"yes",no:"no"},withdrawalOptions=this.state.Data.withdrawalOptions,partialWithdrawalOptions=this.state.Data.partialWithdrawalOptions,withdrawalReasonOptions=this.state.Data.withdrawalReasonOptions,consentOptions=this.state.Data.consentOptions,disclaimerMessage=this.state.disclaimerMessage,disclaimer=[];disclaimerMessage&&""!==disclaimerMessage&&disclaimer.push(React.createElement("div",null,React.createElement("p",{className:"disclaimer"},React.createElement("strong",null,disclaimerMessage))));var formattedHistory=[];for(var row in this.state.Data.history)if(this.state.Data.history.hasOwnProperty(row)){var lineInfo="",historyRow=this.state.Data.history[row],userH=historyRow.entry_staff,updateDateH=historyRow.DateInserted;lineInfo+="[UPDATE by ",lineInfo+=userH,lineInfo+=" at ",lineInfo+=updateDateH,lineInfo+="]",formattedHistory.push(React.createElement("tr",null,React.createElement("td",{style:{padding:"1px",width:"25%"}},React.createElement("i",null,lineInfo)),React.createElement("td",null,React.createElement("b",null,React.createElement("u",null,"Field"))),React.createElement("td",null,React.createElement("b",null,React.createElement("u",null,"Value")))));for(var changedField in historyRow)historyRow.hasOwnProperty(changedField)&&"entry_staff"!==changedField&&"DateInserted"!==changedField&&formattedHistory.push(React.createElement("tr",null,React.createElement("td",null),React.createElement("td",null,React.createElement("b",null,changedField,": ")),React.createElement("td",null,historyRow[changedField])))}var alertMessage="",alertClass="alert text-center hide";if(this.state.updateResult)if("success"===this.state.updateResult)alertClass="alert alert-success text-center",alertMessage="Update Successful!";else if("error"===this.state.updateResult){var errorMessage=this.state.errorMessage;alertClass="alert alert-danger text-center",alertMessage=errorMessage?errorMessage:"Failed to update!"}var partialWithdrawalReq=!1,consentWithdrawalReq=!1;"partial"==this.state.formData.Withdrawal&&(partialWithdrawalReq=!0);var consentWithdrawalDate=this.state.Data.consentWithdrawalDate;return consentWithdrawalDate==this.state.formData.WithdrawalDate&&(consentWithdrawalReq=!0),React.createElement("div",{class:"row"},disclaimer,React.createElement(FormElement,{name:"studyWithdrawalForm",onSubmit:this.handleSubmit,ref:"form",class:"col-md-8"},React.createElement(StaticElement,{label:"PSCID",text:this.state.Data.pscid}),React.createElement(DateElement,{label:"1. Date of Withdrawal",name:"WithdrawalDate",value:this.state.formData.WithdrawalDate,onUserInput:this.setFormData,ref:"WithdrawalDate",disabled:disabled,required:!0}),React.createElement(SelectElement,{label:"2. Is this a full or partial withdrawal?",name:"Withdrawal",options:withdrawalOptions,value:this.state.formData.Withdrawal,onUserInput:this.setFormData,ref:"Withdrawal",disabled:!consentWithdrawalReq||disabled,required:!0}),React.createElement(SelectElement,{label:"If PARTIAL, what is the participant withdrawing from?",name:"PartialWithdrawal",options:partialWithdrawalOptions,value:this.state.formData.PartialWithdrawal,onUserInput:this.setFormData,ref:"PartialWithdrawal",disabled:!(partialWithdrawalReq&&consentWithdrawalReq)||disabled,required:partialWithdrawalReq}),React.createElement(SelectElement,{label:"3. What is the reason for the withdrawal?",name:"WithdrawalReason",options:withdrawalReasonOptions,value:this.state.formData.WithdrawalReason,onUserInput:this.setFormData,ref:"WithdrawalReason",disabled:!consentWithdrawalReq||disabled,required:!0}),React.createElement(TextareaElement,{label:"4. Please provide any further information regarding the withdrawal:",name:"AdditionalInformation",value:this.state.formData.AdditionalInformation,onUserInput:this.setFormData,ref:"AdditionalInformation",disabled:!consentWithdrawalReq||disabled,required:!0}),React.createElement(SelectElement,{label:"5. Does the participant consent to any follow-up visits? (Check all that apply)",name:"Consent",options:consentOptions,value:this.state.formData.Consent,onUserInput:this.setFormData,ref:"Consent",disabled:!consentWithdrawalReq||disabled,multiple:!0,required:!0,emptyOption:!1}),React.createElement(SelectElement,{label:"6. Has the participant agreed that the data already collected can be used?",name:"DataCanBeUsed",options:yesNoOptions,value:this.state.formData.DataCanBeUsed,onUserInput:this.setFormData,ref:"DataCanBeUsed",disabled:!consentWithdrawalReq||disabled,required:!0}),updateButton,React.createElement("div",{className:alertClass,role:"alert",ref:"alert-message"},alertMessage),React.createElement("table",{className:"table-hist"},formattedHistory)))},isEquivalent:function(a,b){if(!a||!b)return!a&&!b&&a==b;var aProps=Object.getOwnPropertyNames(a),bProps=Object.getOwnPropertyNames(b);if(aProps.length!=bProps.length)return!1;for(var i=0;i<aProps.length;i++){var propName=aProps[i];if("object"===_typeof(a[propName])){if(!this.isEquivalent(a[propName],b[propName]))return!1}else if(a[propName]!==b[propName])return!1}return!0},handleSubmit:function(e){e.preventDefault();var equivalentForm=this.isEquivalent(this.state.formData,this.state.baseValues);if(!equivalentForm){this.state.baseValues=JSON.parse(JSON.stringify(this.state.Data.latestValues));var myFormData=this.state.formData,self=this,formData=new FormData;for(var key in myFormData)""!==myFormData[key]&&myFormData[key]&&formData.append(key,myFormData[key]);formData.append("tab",this.props.tabName),formData.append("candID",this.state.Data.candID),$.ajax({type:"POST",url:self.props.action,data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){self.setState({updateResult:"success"}),self.showAlertMessage(),self.fetchData()},error:function(err){if(""!==err.responseText){var errorMessage=JSON.parse(err.responseText).message;self.setState({updateResult:"error",errorMessage:errorMessage}),self.showAlertMessage()}}})}},showAlertMessage:function(){var self=this;if(null!==this.refs["alert-message"]){var alertMsg=this.refs["alert-message"];$(alertMsg).fadeTo(2e3,500).delay(3e3).slideUp(500,function(){self.setState({updateResult:null})})}}}),RStudyWithdrawalForm=React.createFactory(StudyWithdrawalForm);window.StudyWithdrawalForm=StudyWithdrawalForm,window.RStudyWithdrawalForm=RStudyWithdrawalForm,exports.default=StudyWithdrawalForm},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _Tabs=__webpack_require__(10),_VerticalTabs=__webpack_require__(15),ExistingEvents=React.createClass({displayName:"ExistingEvents",render:function(){var existingEventsHTML=[],existingEvents=this.props.eventsData;for(var event in existingEvents)if(existingEvents.hasOwnProperty(event)){var eventReport=this.props.eventReportOptions[existingEvents[event].EventReport],eventID=existingEvents[event].EventID,onsetDate=existingEvents[event].OnsetDate,resolutionDate=existingEvents[event].ResolutionDate,eventLocation=existingEvents[event].Location,eventDescription=existingEvents[event].Description,unexpected=this.props.yesNoOptions[existingEvents[event].Unexpected],eventSeverity=this.props.eventSeverityOptions[existingEvents[event].Severity],compassND=this.props.compassNDRelation[existingEvents[event].CompassNDRelation],action=existingEvents[event].ActionTaken.join("; "),sae=this.props.yesNoOptions[existingEvents[event].SeriousAdverseEvent],saeCategorization=this.props.categorizationSAE[existingEvents[event].SAECategorization]?this.props.categorizationSAE[existingEvents[event].SAECategorization]:"",deathDate=existingEvents[event].DeathDate?existingEvents[event].DeathDate:"",otherSpecification=existingEvents[event].OtherSpecify?existingEvents[event].OtherSpecify:"",treatment=this.props.yesNoOptions[existingEvents[event].SAETreatment]?this.props.yesNoOptions[existingEvents[event].SAETreatment]:"",comment=existingEvents[event].Comment?existingEvents[event].Comment:"",relevantTests=existingEvents[event].RelevantTests?existingEvents[event].RelevantTests:"",relevantHistory=existingEvents[event].RelevantHistory?existingEvents[event].RelevantHistory:"",finalOutcome=this.props.finalOutcomeOptions[existingEvents[event].FinalOutcome],examiners=this.props.examinerOptions[existingEvents[event].Examiner],dateInserted=existingEvents[event].DateInserted;existingEventsHTML.push(React.createElement("div",null,React.createElement(StaticElement,{label:"Event report:",text:eventReport}),React.createElement(StaticElement,{label:"Event ID:",text:eventID}),React.createElement(StaticElement,{label:"1. Date of onset (YYYY-MM-DD):",text:onsetDate}),React.createElement(StaticElement,{label:"2. Date of resolution (YYYY-MM-DD):",text:resolutionDate}),React.createElement(StaticElement,{label:"3. Location where adverse event took place:",text:eventLocation}),React.createElement(StaticElement,{label:"4. Description of the event:",text:eventDescription}),React.createElement(StaticElement,{label:"5. Is this an unexpected adverse event?",text:unexpected}),React.createElement(StaticElement,{label:"6. What is the severity of this event?",text:eventSeverity}),React.createElement(StaticElement,{label:"7. Is the event related to the COMPASS-ND study?",text:compassND}),React.createElement(StaticElement,{label:"8. What action was taken regarding the study intervention? (Check all that apply)",text:action}),React.createElement(StaticElement,{label:"9. Is the event a serious adverse event (SAE) ?",text:sae}),React.createElement(StaticElement,{label:"10. How would you categorize the SAE?",text:saeCategorization}),React.createElement(StaticElement,{label:"Death of participant on  (YYYY-MM-DD):",text:deathDate}),React.createElement(StaticElement,{label:"If 'other', please specify: ",text:otherSpecification}),React.createElement(StaticElement,{label:"11. Were medications or other steps taken to treat the SAE?",text:treatment}),React.createElement(StaticElement,{label:"Medication specifics:",text:comment}),React.createElement(StaticElement,{label:"12. List any relevant tests and/or laboratory data (including dates) or attach the appropriate documentation:",text:relevantTests}),React.createElement(StaticElement,{label:"13. Record relevant history, including pre-existing medical conditions:",text:relevantHistory}),React.createElement(StaticElement,{label:"14. What is the final outcome of the adverse event?",text:finalOutcome}),React.createElement(StaticElement,{label:"15. Evaluated by:",text:examiners}),React.createElement(StaticElement,{label:"Date inserted: ",text:dateInserted}),React.createElement(ButtonElement,{label:"Delete",type:"button",onUserInput:this.props.deleteAdverseEvent.bind(null,eventID,event)}),React.createElement("hr",null)))}var tabList=[];for(var ID in existingEvents){var labelID=existingEvents[ID].EventID,eventID="event"+ID;tabList.push({id:eventID,label:labelID})}tabList.push({id:"newEvent",label:"Add New Event"});var newEventKey=tabList.length-1;return React.createElement("div",null,React.createElement(_VerticalTabs.VerticalTabs,{tabs:tabList,defaultTab:"newEvent",updateURL:!1},this.props.getTabPanes(tabList,existingEventsHTML),React.createElement(_Tabs.TabPane,{TabId:tabList[newEventKey].id,key:newEventKey},this.props.addNewEvent())))}}),AdverseEventReport=React.createClass({displayName:"AdverseEventReport",getInitialState:function(){return{Data:[],formData:{},existingEvents:[],updateResult:null,errorMessage:null,isLoaded:!1,loadedData:0}},componentDidMount:function(){this.fetchData()},fetchData:function(){var that=this;$.ajax(this.props.dataURL,{dataType:"json",xhr:function xhr(){var xhr=new window.XMLHttpRequest;return xhr.addEventListener("progress",function(evt){that.setState({loadedData:evt.loaded})}),xhr},success:function(data){that.setState({Data:data,isLoaded:!0,existingEvents:data.existingEvents})},error:function(data,errorCode,errorMsg){that.setState({error:"An error occurred when loading the form!"})}})},setFormData:function(formElement,value){var formData=this.state.formData;formData[formElement]=value,this.setState({formData:formData})},getTabPanes:function(tabList,existingEvents){var tabPanes=Object.keys(existingEvents).map(function(key){return React.createElement(_Tabs.TabPane,{TabId:tabList[key].id,key:key},existingEvents[key])});return tabPanes},onSubmit:function(e){e.preventDefault()},render:function(){if(!this.state.isLoaded)return void 0!==this.state.error?React.createElement("div",{className:"alert alert-danger text-center"},React.createElement("strong",null,this.state.error)):React.createElement("button",{className:"btn-info has-spinner"},"Loading",React.createElement("span",{className:"glyphicon glyphicon-refresh glyphicon-refresh-animate"}));var existingEvents=this.state.existingEvents,alertMessage="",alertClass="alert text-center hide";if(this.state.updateResult)if("success"===this.state.updateResult)alertClass="alert alert-success text-center",alertMessage="Update Successful!";else if("error"===this.state.updateResult){var errorMessage=this.state.errorMessage;alertClass="alert alert-danger text-center",alertMessage=errorMessage?errorMessage:"Failed to update!"}var eventReportOptions=this.state.Data.eventReportOptions,yesNoOptions={yes:"Yes",no:"No"},eventSeverityOptions=this.state.Data.eventSeverityOptions,compassNDRelation=this.state.Data.compassNDRelation,studyInterventionAction=this.state.Data.studyInterventionAction,finalOutcomeOptions=this.state.Data.finalOutcomeOptions,categorizationSAE=this.state.Data.categorizationSAE,examinerOptions=this.state.Data.examiners;return React.createElement("div",{className:"row"},React.createElement(FormElement,{name:"adverseEventReport",onSubmit:this.handleSubmit,ref:"form",class:"col-md-12"},React.createElement(StaticElement,{label:"PSCID",text:this.state.Data.pscid}),React.createElement(StaticElement,{label:"DCCID",text:this.state.Data.candID}),React.createElement("div",null,React.createElement("hr",null),React.createElement(StaticElement,{label:"Adverse Events"}),React.createElement(ExistingEvents,{eventsData:existingEvents,getTabPanes:this.getTabPanes,deleteAdverseEvent:this.deleteAdverseEventReport,addNewEvent:this.addNewEvent,eventReportOptions:eventReportOptions,yesNoOptions:yesNoOptions,eventSeverityOptions:eventSeverityOptions,compassNDRelation:compassNDRelation,studyInterventionAction:studyInterventionAction,finalOutcomeOptions:finalOutcomeOptions,categorizationSAE:categorizationSAE,examinerOptions:examinerOptions})),React.createElement("br",null),React.createElement("br",null),React.createElement("div",{className:alertClass,role:"alert",ref:"alert-message"},alertMessage)))},addNewEvent:function(){var disabled=!0,addButton=null;loris.userHasPermission("candidate_parameter_edit")&&(disabled=!1,addButton=React.createElement(ButtonElement,{label:"Add"}));var eventReportOptions=this.state.Data.eventReportOptions,yesNoOptions={yes:"Yes",no:"No"},eventSeverityOptions=this.state.Data.eventSeverityOptions,compassNDRelation=this.state.Data.compassNDRelation,studyInterventionAction=this.state.Data.studyInterventionAction,finalOutcomeOptions=this.state.Data.finalOutcomeOptions,categorizationSAE=this.state.Data.categorizationSAE,categorizeSAEReq=!1,treatmentSAEReq=!1,relevantTestsReq=!1,relevantHistoryReq=!1,commentReq=!1,existingEvents=this.state.existingEvents,alertMessage="",alertClass="alert text-center hide";for(var event in existingEvents)existingEvents.hasOwnProperty(event)&&this.state.formData.EventID==existingEvents[event].EventID&&(alertClass="alert alert-danger text-center",alertMessage="Event ID already exists!",addButton=null);"yes"==this.state.formData.SeriousAdverseEvent&&(categorizeSAEReq=!0,treatmentSAEReq=!0,relevantTestsReq=!0,relevantHistoryReq=!0),"yes"==this.state.formData.SAETreatment&&(commentReq=!0);var deathReq=!1;"death"==this.state.formData.SAECategorization&&(deathReq=!0);var specifyReq=!1;return"other"==this.state.formData.SAECategorization&&(specifyReq=!0),React.createElement("div",null,React.createElement("div",{className:alertClass,role:"alert",ref:"alert-message"},alertMessage),React.createElement(SelectElement,{label:"Event report:",name:"EventReport",options:eventReportOptions,value:this.state.formData.EventReport,onUserInput:this.setFormData,ref:"EventReport",disabled:disabled,required:!0}),React.createElement(TextboxElement,{label:"Event title:",name:"EventID",value:this.state.formData.EventID,onUserInput:this.setFormData,ref:"EventID",disabled:disabled,required:!0}),React.createElement(DateElement,{label:"1. Date of onset:",name:"OnsetDate",value:this.state.formData.OnsetDate,onUserInput:this.setFormData,ref:"OnsetDate",disabled:disabled,required:!0}),React.createElement(DateElement,{label:"2. Date of resolution:",name:"ResolutionDate",value:this.state.formData.ResolutionDate,onUserInput:this.setFormData,ref:"ResolutionDate",disabled:disabled,required:!0}),React.createElement(TextareaElement,{label:"3. Location where adverse event took place:",name:"Location",value:this.state.formData.Location,onUserInput:this.setFormData,ref:"Location",disabled:disabled,required:!0}),React.createElement(TextareaElement,{label:"4. Description of the event:",name:"Description",value:this.state.formData.Description,onUserInput:this.setFormData,ref:"Description",disabled:disabled,required:!0}),React.createElement(SelectElement,{label:"5. Is this an unexpected adverse event?",name:"Unexpected",options:yesNoOptions,value:this.state.formData.Unexpected,onUserInput:this.setFormData,ref:"Unexpected",disabled:disabled,required:!0}),React.createElement(SelectElement,{label:"6. What is the severity of this event?",name:"Severity",options:eventSeverityOptions,value:this.state.formData.Severity,onUserInput:this.setFormData,ref:"Severity",disabled:disabled,required:!0}),React.createElement(SelectElement,{label:"7. Is the event related to the COMPASS-ND study?",name:"CompassNDRelation",options:compassNDRelation,value:this.state.formData.CompassNDRelation,onUserInput:this.setFormData,ref:"CompassNDRelation",disabled:disabled,required:!0}),React.createElement(SelectElement,{label:"8. What action was taken regarding the study intervention? (Check all that apply)",name:"ActionTaken",options:studyInterventionAction,
value:this.state.formData.ActionTaken,onUserInput:this.setFormData,ref:"ActionTaken",multiple:"multiple",disabled:disabled,required:!0,emptyOption:!1}),React.createElement(SelectElement,{label:"9. Is the event a serious adverse event (SAE)?",name:"SeriousAdverseEvent",options:yesNoOptions,value:this.state.formData.SeriousAdverseEvent,onUserInput:this.setFormData,ref:"SeriousAdverseEvent",disabled:disabled,required:!0}),React.createElement(SelectElement,{label:"10. How would you categorize the SAE?",name:"SAECategorization",options:categorizationSAE,value:this.state.formData.SAECategorization,onUserInput:this.setFormData,ref:"SAECategorization",disabled:!categorizeSAEReq||disabled,required:categorizeSAEReq}),React.createElement(DateElement,{label:"Death of participant on:",name:"DeathDate",value:this.state.formData.DeathDate,onUserInput:this.setFormData,ref:"DeathDate",disabled:!deathReq||disabled,required:deathReq}),React.createElement(TextareaElement,{label:"If 'other', please specify:",name:"OtherSpecify",value:this.state.formData.OtherSpecify,onUserInput:this.setFormData,ref:"OtherSpecify",disabled:!specifyReq||disabled,required:specifyReq}),React.createElement(SelectElement,{label:"11. Were medications or other steps taken to treat the SAE?",name:"SAETreatment",options:yesNoOptions,value:this.state.formData.SAETreatment,onUserInput:this.setFormData,ref:"SAETreatment",disabled:!treatmentSAEReq||disabled,required:treatmentSAEReq}),React.createElement(TextareaElement,{label:"If YES, please specify:",name:"Comment",value:this.state.formData.Comment,onUserInput:this.setFormData,ref:"Comment",disabled:!commentReq||disabled,required:commentReq}),React.createElement(TextareaElement,{label:"12. List any relevant tests and/or laboratory data (including dates) or attach the appropriate documentation:",name:"RelevantTests",value:this.state.formData.RelevantTests,onUserInput:this.setFormData,ref:"RelevantTests",disabled:!relevantTestsReq||disabled,required:relevantTestsReq}),React.createElement(TextareaElement,{label:"13. Record relevant history, including pre-existing medical conditions:",name:"RelevantHistory",value:this.state.formData.RelevantHistory,onUserInput:this.setFormData,ref:"RelevantHistory",disabled:!relevantHistoryReq||disabled,required:relevantHistoryReq}),React.createElement(SelectElement,{label:"14. What is the final outcome of the adverse event?",name:"FinalOutcome",options:finalOutcomeOptions,value:this.state.formData.FinalOutcome,onUserInput:this.setFormData,ref:"FinalOutcome",disabled:disabled,required:!0}),React.createElement(SelectElement,{label:"15. Evaluated by:",name:"Examiner",options:this.state.Data.examiners,value:this.state.formData.Examiner,onUserInput:this.setFormData,ref:"Examiner",disabled:disabled,required:!0}),addButton)},handleSubmit:function(e){e.preventDefault();var myFormData=this.state.formData,self=this,formData=new FormData,formRefs=this.refs,existingEvents=this.state.existingEvents,existingEvent={};for(var key in myFormData)myFormData.hasOwnProperty(key)&&""!==myFormData[key]&&(existingEvent[key]=myFormData[key],formData.append(key,myFormData[key]));formData.append("tab",this.props.tabName),formData.append("candID",this.state.Data.candID),existingEvents.push(existingEvent),this.setState({existingEvents:existingEvents}),$.ajax({type:"POST",url:self.props.action,data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){self.setState({updateResult:"success",formData:{}}),self.showAlertMessage(),self.fetchData(),Object.keys(formRefs).map(function(ref){formRefs[ref].state&&formRefs[ref].state.value&&(formRefs[ref].state.value="")}),self.forceUpdate()},error:function(err){if(""!==err.responseText){var errorMessage=JSON.parse(err.responseText).message;self.setState({updateResult:"error",errorMessage:errorMessage}),self.showAlertMessage()}else{var errorMessage="ERROR: Contact Administrator";self.setState({updateResult:"error",errorMessage:errorMessage}),self.showAlertMessage()}}})},showAlertMessage:function(){var self=this;if(null!==this.refs["alert-message"]){var alertMsg=this.refs["alert-message"];$(alertMsg).fadeTo(2e3,500).delay(3e3).slideUp(500,function(){self.setState({updateResult:null})})}},deleteAdverseEventReport:function(eventID,key){var existingEvents=this.state.existingEvents;delete existingEvents[key],this.setState({existingEvents:existingEvents});var myFormData=this.state.formData,self=this,formData=new FormData;for(var _key in myFormData)myFormData.hasOwnProperty(_key)&&""!==myFormData[_key]&&myFormData[_key]&&formData.append(_key,myFormData[_key]);formData.append("tab","deleteAdverseEventReport"),formData.append("candID",this.state.Data.candID),formData.append("event",eventID),$.ajax({type:"POST",url:self.props.action,data:formData,cache:!1,contentType:!1,processData:!1,success:function(data){self.setState({updateResult:"success"}),self.showAlertMessage()},error:function(err){if(""!==err.responseText){var errorMessage=JSON.parse(err.responseText).message;self.setState({updateResult:"error",errorMessage:errorMessage}),self.showAlertMessage()}else{var errorMessage="ERROR: Contact Administrator";self.setState({updateResult:"error",errorMessage:errorMessage}),self.showAlertMessage()}}})}}),RAdverseEventReport=React.createFactory(AdverseEventReport);window.AdverseEventReport=AdverseEventReport,window.RAdverseEventReport=RAdverseEventReport,exports.default=AdverseEventReport},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),VerticalTabs=function(_React$Component){function VerticalTabs(props){_classCallCheck(this,VerticalTabs);var _this=_possibleConstructorReturn(this,(VerticalTabs.__proto__||Object.getPrototypeOf(VerticalTabs)).call(this,props)),hash=window.location.hash,activeTab="";return _this.props.updateURL&&hash?activeTab=hash.substr(1):_this.props.defaultTab?activeTab=_this.props.defaultTab:_this.props.tabs.length>0&&(activeTab=_this.props.tabs[0].id),_this.state={activeTab:activeTab},_this.handleClick=_this.handleClick.bind(_this),_this.getTabs=_this.getTabs.bind(_this),_this.getTabPanes=_this.getTabPanes.bind(_this),_this}return _inherits(VerticalTabs,_React$Component),_createClass(VerticalTabs,[{key:"handleClick",value:function(tabId,e){if(this.setState({activeTab:tabId}),this.props.onTabChange(tabId),this.props.updateURL){var scrollDistance=$("body").scrollTop()||$("html").scrollTop();window.location.hash=e.target.hash,$("html,body").scrollTop(scrollDistance)}}},{key:"getTabs",value:function(){var tabs=this.props.tabs.map(function(tab){var tabClass=this.state.activeTab===tab.id?"active":null,href="#"+tab.id,tabID="tab-"+tab.id;return React.createElement("li",{role:"presentation",className:tabClass,key:tab.id},React.createElement("a",{id:tabID,href:href,role:"tab","data-toggle":"tab",onClick:this.handleClick.bind(null,tab.id)},tab.label))}.bind(this));return tabs}},{key:"getTabPanes",value:function(){var tabPanes=React.Children.map(this.props.children,function(child,key){if(child)return React.cloneElement(child,{activeTab:this.state.activeTab,key:key})}.bind(this));return tabPanes}},{key:"render",value:function(){var tabs=this.getTabs(),tabPanes=this.getTabPanes(),tabStyle={marginLeft:0,marginBottom:"5px"};return React.createElement("div",null,React.createElement("div",{className:"tabbable col-md-3 col-sm-3"},React.createElement("ul",{className:"nav nav-pills nav-stacked",role:"tablist",style:tabStyle},tabs)),React.createElement("div",{className:"tab-content col-md-9 col-sm-9"},tabPanes))}}]),VerticalTabs}(React.Component);VerticalTabs.propTypes={tabs:React.PropTypes.array.isRequired,defaultTab:React.PropTypes.string,updateURL:React.PropTypes.bool},VerticalTabs.defaultProps={onTabChange:function(){},updateURL:!1},exports.VerticalTabs=VerticalTabs}]);
//# sourceMappingURL=CandidateParameters.js.map