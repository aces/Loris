{"version":3,"sources":["../jsx/react.instrument_builder.js"],"names":[],"mappings":"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","file":"react.instrument_builder.js","sourcesContent":["/**\n *\tThis file contains the React classes for instrument builder\n * \tmodule.\n */\n\n/**\n *\tBase class for tabs within the UI of the instrument builder\n */\nTabPane = React.createClass({\n    render: function() {\n        var classList = \"tab-pane\";\n        if(this.props.Active) {\n            classList += \" active\"\n        }\n        // Render the HTML\n        return (\n            <div className={classList} id={this.props.TabId}>\n                <h1 className=\"tabHeader\">{this.props.Title}</h1>\n                \t{this.props.children}\n            </div>\n        );\n    }\n});\n\n/**\n *\tThis is the React class for loading in a previously\n *\tmade instrument.\n */\nLoadPane = React.createClass({\n\tgetInitialState: function() {\n\t \treturn {\n\t \t\t// This is used to alert the user if the file was\n\t \t\t// loaded successfully or there was an error with\n\t \t\t// the loading.\n\t \t\talert: ''\n\t \t};\n\t},\n\t// Indicates to the state which file has been choosen\n\tchooseFile: function (e) {\n\t\tvar value = e.target.files[0];\n\t\tthis.setState({\n\t\t\tfile: value,\n\t\t\talert: ''\n\t\t});\n\t},\n\t// Sets the alert to the specified type.\n\tsetAlert: function (type) {\n\t\tthis.setState({\n\t\t\talert: type\n\t\t});\n\t},\n\t// Reset the alert to empty.\n\tresetAlert: function () {\n\t\tthis.setState({\n\t\t\talert: ''\n\t\t});\n\t},\n\t// Loads the specified file into builder tab.\n\tloadFile: function () {\n\t\t// Declare the success and error callbacks\n\t\tvar callback = {\n\t\t\t\tsuccess: this.props.loadCallback,\n\t\t\t\terror: this.setAlert\n\t\t\t};\n\t\tInstrument.load(this.state.file, callback);\n\t},\n\t// Render the HTML\n\trender: function () {\n\t\tvar alert = '';\n\t\t// Set up declared alerts, if there is any.\n\t\tswitch (this.state.alert) {\n\t\t\tcase 'success':\n\t\t\t\talert = (\n\t\t\t\t\t<div className=\"alert alert-success alert-dismissible\" role=\"alert\">\n\t\t\t\t\t\t  <button type=\"button\" className=\"close\" onClick={this.resetAlert}><span aria-hidden=\"true\">&times;</span></button>\n\t\t\t\t\t\t  <strong>Success!</strong> Instrument Loaded\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t\tbreak;\n\t\t\tcase 'typeError':\n\t\t\t\talert = (\n\t\t\t\t\t<div className=\"alert alert-danger alert-dismissible\" role=\"alert\">\n\t\t\t\t\t\t  <button type=\"button\" className=\"close\" onClick={this.resetAlert}><span aria-hidden=\"true\">&times;</span></button>\n\t\t\t\t\t\t  <strong>Error!</strong> Wrong file format\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t\tbreak;\n\t\t}\n\t\treturn (\n\t\t\t<TabPane Title=\"Load Instrument\" TabId={this.props.TabId}>\n                \t<div className=\"col-sm-6 col-xs-12\">\n                \t\t{alert}\n\t\t\t\t\t\t<input className=\"fileUpload\"\n\t\t\t\t\t\t\t   type=\"file\" id=\"instfile\"\n\t\t\t            \t   onChange={this.chooseFile}\n\t\t\t\t\t\t/>\n\t\t\t            <input className=\"btn btn-primary spacingTop\"\n\t\t\t            \t   type=\"button\" id=\"load\"\n\t\t\t            \t   value=\"Load Instrument\"\n\t\t\t            \t   onClick={this.loadFile}\n\t\t\t            />\n\t\t\t        </div>\n\t\t\t</TabPane>\n\t\t);\n\t}\n});\n\n/**\n *\tThis is the React class for saving the instrument\n */\nSavePane = React.createClass({\n\tgetInitialState: function() {\n\t \treturn {\n\t \t\tfileName: '',\n\t \t\tinstrumentName: ''\n\t \t};\n\t},\n\t// Used to set the state when a file is loaded\n\t// using the load tab.\n\tloadState: function(newState) {\n\t\tthis.setState({\n\t\t\tfileName: newState.fileName,\n\t\t\tinstrumentName: newState.instrumentName\n\t\t});\n\t},\n\t// Keep track of the file name, saving it in the state\n\tonChangeFile: function(e){\n\t\tvar value = e.target.value;\n\t\tthis.setState({\n\t\t\tfileName: value\n\t\t});\n\t},\n\t// Keep track of the instrument name, saving it in the state\n\tonChangeInst: function(e){\n\t\tvar value = e.target.value;\n\t\tthis.setState({\n\t\t\tinstrumentName: value\n\t\t});\n\t},\n\t// Render the HTML\n\trender: function () {\n\t\tvar value = this.state.fileName;\n\t\treturn (\n\t\t\t<TabPane Title=\"Save Instrument\"\n                TabId={this.props.TabId}>\n                \t<div className=\"form-group\">\n                \t\t<div className=\"col-xs-12\">\n\t\t\t                <label className=\"col-sm-2 control-label\">Filename: </label>\n\t\t\t                <div className=\"col-sm-4\">\n\t\t\t                    <input className=\"form-control\"\n\t\t\t                    \t   type=\"text\" id=\"filename\"\n\t\t\t                    \t   value={value}\n\t\t\t                    \t   onChange={this.onChangeFile}\n\t\t\t                   \t/>\n\t\t\t                </div>\n\t\t\t            </div>\n\t\t\t            <div className=\"col-xs-12 spacingTop\">\n\t\t\t                <label className=\"col-sm-2 control-label\">Instrument Name: </label>\n\t\t\t                <div className=\"col-sm-4\">\n\t\t\t                    <input className=\"form-control\"\n\t\t\t                    \t   type=\"text\" id=\"longname\"\n\t\t\t                    \t   value={this.state.instrumentName}\n\t\t\t                    \t   onChange={this.onChangeInst}\n\t\t\t                    />\n\t\t\t                </div>\n\t\t\t            </div>\n\t\t\t            <div className=\"col-xs-12 spacingTop\">\n\t\t\t            \t<div className=\"col-xs-12 col-sm-4 col-sm-offset-2\">\n\t\t\t                \t<input className=\"btn btn-primary col-xs-12\"\n\t\t\t                \t\t   type=\"submit\" value=\"Save\"\n\t\t\t                \t\t   onClick={this.props.save}\n\t\t\t                \t/>\n\t\t\t                </div>\n\t\t\t            </div>\n\t\t            </div>\n\t\t\t</TabPane>\n\t\t);\n\t}\n});\n\n/**\n *\tThis is the React class displaying the questions\n *\tin the table.\n */\nDisplayElements = React.createClass({\n\t// Used for the drag and drop rows\n\tgetPlaceholder: function() {\n\t    if (!this.placeholder) {\n\t      var tr = document.createElement('tr');\n\t      tr.className = \"placeholder\";\n\t      var td = document.createElement('td');\n\t      td.colSpan = 2;\n\t      td.appendChild(document.createTextNode(\"Drop here\"));\n\t      tr.appendChild(td);\n\t      this.placeholder = tr;\n\t    }\n\t    return this.placeholder;\n\t},\n\t// Used for the drag and drop rows\n\tgetTableRow: function(element) {\n\t    if (element.tagName !== 'tr') {\n\t      return $(element).closest('tr')[0];\n\t    }\n\t    else {\n\t      return element;\n\t    }\n\t},\n\t// Used for the drag and drop rows\n\tdragStart: function(e) {\n\t    this.dragged = this.getTableRow(e.currentTarget);\n\t    e.dataTransfer.effectAllowed = 'move';\n\t    // Firefox requires dataTransfer data to be set\n\t    e.dataTransfer.setData(\"text/html\", e.currentTarget);\n\t},\n\t// Used for the drag and drop rows\n\tdragEnd: function(e) {\n\t    this.dragged.style.display = \"table-row\";\n\t    this.dragged.parentNode.removeChild(this.getPlaceholder());\n\n\t    // Update data\n\t    var data = this.props.elements;\n\t    var from = Number(this.dragged.dataset.id);\n\t    var to = Number(this.over.dataset.id);\n\t    if (from < to) to--;\n\t    if (this.nodePlacement == \"after\") to++;\n\t    data.splice(to, 0, data.splice(from, 1)[0]);\n\t    this.setState({\n\t    \tdata: data\n\t   \t});\n\t},\n\t// Used for the drag and drop rows\n\tdragOver: function(e) {\n\t    e.preventDefault();\n\t    var targetRow = this.getTableRow(e.target);\n\n\t    this.dragged.style.display = \"none\";\n\t    if (targetRow.className == \"placeholder\") return;\n\t    this.over = targetRow;\n\t    // Inside the dragOver method\n\t    var relY = e.pageY - $(this.over).offset().top;\n\t    var height = this.over.offsetHeight / 2;\n\t    var parent = targetRow.parentNode;\n\n\t    if (relY >= height) {\n\t      this.nodePlacement = \"after\";\n\t      parent.insertBefore(this.getPlaceholder(), targetRow.nextElementSibling);\n\t    }\n\t    else { // relY < height\n\t      this.nodePlacement = \"before\"\n\t      parent.insertBefore(this.getPlaceholder(), targetRow);\n\t    }\n\t},\n\t// Render the HTML\n\trender: function () {\n\t\tvar temp = this.props.elements.map((function(element, i){\n\t\t\t\t\t\tvar row;\n\t\t\t\t\t\tif(element.editing){\n\t\t\t\t\t\t\t// If you are editing an element, show element as an AddElement object\n\t\t\t\t\t\t\trow = (\n\t\t\t\t\t\t\t\t<tr data-id={i}\n\t\t\t\t\t            key={i}\n\t\t\t\t\t            draggable={this.props.draggable}\n\t\t\t\t\t            onDragEnd={this.dragEnd}\n\t\t\t\t\t            onDragStart={this.dragStart}>\n\t\t\t\t\t\t\t\t\t<td className=\"col-xs-2\" colSpan=\"3\">\n\t\t\t\t\t\t\t\t\t\t<AddElement updateQuestions={this.props.updateElement} element={element} index={i}/>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Else display element in regular way\n\t\t\t\t\t\t\trow = (\n\t\t\t\t\t\t\t\t<tr data-id={i}\n\t\t\t\t\t            key={i}\n\t\t\t\t\t            draggable={this.props.draggable}\n\t\t\t\t\t            onDragEnd={this.dragEnd}\n\t\t\t\t\t            onDragStart={this.dragStart}>\n\t\t\t\t\t\t\t\t\t<td className=\"col-xs-2\">\n\t\t\t\t\t\t\t\t\t\t{element.Name}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"col-xs-8\">\n\t\t\t\t\t\t\t\t\t\t<LorisElement element={element} />\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td className=\"col-xs-2\">\n\t\t\t\t\t\t\t\t\t\t<button onClick={this.props.editElement.bind(this, i)} className=\"button\">\n\t\t\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<button onClick={this.props.deleteElement.bind(this, i)} className=\"button\">\n\t\t\t\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t{row}\n\t\t\t\t\t\t)\n\t\t\t\t\t}).bind(this));\n\t\treturn (\n\t\t\t<table id=\"sortable\" className=\"table table-hover\">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th className=\"col-xs-2\">Database Name</th>\n\t\t\t\t\t\t<th>Question Display (Front End)</th>\n\t\t\t\t\t\t<th>Edit</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody onDragOver={this.dragOver}>\n\t\t\t\t\t{temp}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t)\n\t}\n});\n\n/**\n *\tThis is the React class for building the instrument\n */\nBuildPane = React.createClass({\n\tgetInitialState: function() {\n\t \treturn {\n\t \t\t// Keep track of the page groups\n\t \t\tElements: [{\n\t \t\t\tType      \t: \"ElementGroup\",\n    \t\t\tGroupType \t: \"Page\",\n    \t\t\tDescription : \"Top\",\n    \t\t\t// Keep track of the elements on the page\n    \t\t\tElements \t: []\n\t \t\t}],\n\t \t\t// Keep track if elements are being edited to ensure\n\t \t\t// that drag and drop is not usable if any are being\n\t \t\t// edited\n\t \t\tamountEditing : 0,\n\t \t\t// Keep track of which page you are on\n\t \t\tcurrentPage   : 0,\n\t \t\t// Keep track of elements DB names to ensure no doubles\n\t \t\t// are added\n\t \t\telementDBNames : {}\n\t \t};\n\t},\n\t// Load in a group of elements, replacing any that\n\t// were already present\n\tloadElements: function(elements) {\n\t\tthis.setState({\n\t\t\tElements: elements\n\t\t});\n\t},\n\t// Set the element editing flag to true to render the element\n\t// as an AddQuestion object. Increase the number of editing to\n\t// disable drag and drop\n\teditElement: function(elementIndex){\n\t\t// Use a function to update the state to enqueue an atomic\n\t\t// update that consults the previous value of state before\n\t\t// setting any values\n\t\tthis.setState(function(state){\n\t\t\tvar temp = state.Elements,\n\t\t\t\tedit = state.amountEditing + 1,\n\t\t\t\tdbNames = state.elementDBNames;\n\t\t\tdelete dbNames[temp[state.currentPage].Elements[elementIndex].Name];\n\t\t\ttemp[state.currentPage].Elements[elementIndex].editing = true;\n\t\t\treturn {\n\t\t\t\tElements: temp,\n\t\t\t\tamountEditing: edit,\n\t\t\t\telementDBNames: dbNames\n\t\t\t};\n\t\t});\n\t},\n\t// Remove an element from the current page's elements.\n\tdeleteElement: function(elementIndex){\n\t\t// Use a function to update the state to enqueue an atomic\n\t\t// update that consults the previous value of state before\n\t\t// setting any values\n\t\tthis.setState(function(state){\n\t\t\tvar temp = state.Elements;\n\t\t\ttemp[state.currentPage].Elements.splice(elementIndex, 1);\n\t\t\treturn {\n\t\t\t\tElements: temp\n\t\t\t};\n\t\t});\n\t},\n\t// Update an element. Returns true on success, false otherwise\n\tupdateElement: function(element, index){\n\t\tif (element.Name && element.Name in this.state.elementDBNames){\n\t\t\t// If the DB name already exists return false.\n\t\t\treturn false;\n\t\t}\n\t\t// Use a function to update the state to enqueue an atomic\n\t\t// update that consults the previous value of state before\n\t\t// setting any values\n\t\tthis.setState(function(state){\n\t\t\tvar temp = state.Elements,\n\t\t\t\t// Decriment the editing count\n\t\t\t\tedit = state.amountEditing - 1,\n\t\t\t\tdbNa = state.elementDBNames;\n\t\t\ttemp[state.currentPage].Elements[index] = element;\n\t\t\tif (element.Name) {\n\t\t\t\t// Add the DB name to the list of current names\n\t\t\t\tdbNa[element.Name] = '';\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tElements: temp,\n\t\t\t\tamountEditing: edit,\n\t\t\t\telementDBNames: dbNa\n\t\t\t};\n\t\t});\n\t\treturn true;\n\t},\n\t// Add a new question to the page's elements\n\taddQuestion: function(element){\n\t\tif (element.Name && element.Name in this.state.elementDBNames){\n\t\t\t// If the DB name already exists return false.\n\t\t\treturn false;\n\t\t}\n\t\t// Use a function to update the state to enqueue an atomic\n\t\t// update that consults the previous value of state before\n\t\t// setting any values\n\t\tthis.setState(function(state){\n\t\t\tvar temp = state.Elements,\n\t\t\t\tdbNa = state.elementDBNames;\n\t\t\tif (element.Name) {\n\t\t\t\t// Add the DB name to the list of current names\n\t\t\t\tdbNa[element.Name] = '';\n\t\t\t}\n\t\t\ttemp[state.currentPage].Elements.push(element);\n\t\t\treturn {\n\t\t\t\tElements: temp,\n\t\t\t\telementDBNames: dbNa\n\t\t\t};\n\t\t});\n\t\treturn true;\n\t},\n\t// Add a new page\n\taddPage: function (pageName) {\n\t\t// Use a function to update the state to enqueue an atomic\n\t\t// update that consults the previous value of state before\n\t\t// setting any values\n\t\tthis.setState(function(state){\n\t\t\tvar temp = state.Elements,\n\t\t\t\t// change the current page to the new one\n\t\t\t\tpage = state.currentPage + 1;\n\t\t\ttemp.push({\n\t \t\t\tType      \t: \"ElementGroup\",\n    \t\t\tGroupType \t: \"Page\",\n    \t\t\tDescription : pageName,\n    \t\t\tElements \t: []\n\t \t\t});\n\t\t\treturn {\n\t\t\t\tElements: temp,\n\t\t\t\tcurrentPage: page\n\t\t\t};\n\t\t});\n\t},\n\t// Change to a page\n\tselectPage: function (index) {\n\t\tthis.setState({\n\t\t\tcurrentPage: index\n\t\t});\n\t},\n\t// Render the HTML\n\trender: function () {\n\t\tvar draggable = this.state.amountEditing === 0 ? true : false,\n\t\t\tthat\t  = this,\n\t\t\t// List the pages\n\t\t\tpages \t  = this.state.Elements.map((function(element, i){\n\t\t\t        \t\treturn (\n\t\t\t        \t\t\t<li onClick={that.selectPage.bind(this, i)}>\n\t\t\t                    \t<a>{that.state.Elements[i].Description}</a>\n\t\t\t                \t</li>\n\t\t\t                );\n\t\t\t        \t}));\n\t\treturn (\n\t\t\t<TabPane Title=\"Build your Instrument\"\n                TabId={this.props.TabId} Active={true}>\n                \t<div className=\"form-group col-xs-12\">\n\t\t\t\t\t    <label for=\"selected-input\" className=\"col-xs-2 col-sm-1 control-label\">Page:</label>\n\t\t\t            <div className=\"col-sm-4\">\n\t\t\t                <div className=\"btn-group\">\n\t\t\t                    <button id=\"selected-input\" type=\"button\" className=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\">\n\t\t\t                        <span id=\"search_concept\">{this.state.Elements[this.state.currentPage].Description}</span>\n\t\t\t                        <span className=\"caret\"></span>\n\t\t\t\t\t\t        </button>\n\t\t\t\t\t\t        <ul className=\"dropdown-menu\" role=\"menu\">\n\t\t\t\t\t\t        \t{pages}\n\t\t\t\t\t\t        </ul>\n\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<DisplayElements\n\t\t\t\t\t\telements={this.state.Elements[this.state.currentPage].Elements}\n\t\t\t\t\t\teditElement={this.editElement}\n\t\t\t\t\t\tdeleteElement={this.deleteElement}\n\t\t\t\t\t\tupdateElement={this.updateElement}\n\t\t\t\t\t\tdraggable = {draggable}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t<AddElement updateQuestions={this.addQuestion} addPage={this.addPage}/>\n\t\t\t\t\t</div>\n\t\t\t</TabPane>\n\t\t);\n\t}\n});\n\n/**\n *\tThis is the React class for the instrument builder\n */\nInstrumentBuilderApp = React.createClass({\n\t// Save the instrument\n\tsaveInstrument: function(){\n\t\t// Call to external function, passing it the save information and the elements\n\t\t// to save\n\t\tInstrument.save(this.refs.savePane.state, this.refs.buildPane.state.Elements);\n\t},\n\t// Load an instrument\n\tloadCallback: function(elements, info) {\n\t\t// Set the savePane state to that extracted from the file\n\t\tthis.refs.savePane.loadState(info);\n\t\t// Set the buildPane elements to the rendered elements\n\t\tthis.refs.buildPane.loadElements(elements);\n\t\t// Set the alert state to success in the loadPane\n\t\tthis.refs.loadPane.setAlert('success');\n\t},\n\t// Render the HTML\n\trender: function () {\n\t\tvar tabs = [];\n\t\ttabs.push(\n\t\t\t<LoadPane\n\t\t\t\tTabId=\"Load\"\n\t\t\t\tref=\"loadPane\"\n\t\t\t\tloadCallback={this.loadCallback}\n\t\t\t/>\n\t\t);\n\t\ttabs.push(\n\t\t\t<BuildPane\n\t\t\t\tTabId=\"Build\"\n\t\t\t\tref=\"buildPane\"\n\t\t\t/>\n\t\t);\n\t\ttabs.push(\n\t\t\t<SavePane\n\t\t\t\tTabId=\"Save\"\n\t\t\t\tref=\"savePane\"\n\t\t\t\tsave={this.saveInstrument}\n\t\t\t/>\n\t\t);\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<ul className=\"nav nav-tabs\" role=\"tablist\">\n\t\t\t\t\t<li role=\"presentation\"><a href=\"#Load\" aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\">Load</a></li>\n\t\t\t\t    <li role=\"presentation\" className=\"active\"><a href=\"#Build\" aria-controls=\"build\" role=\"tab\" data-toggle=\"tab\">Build</a></li>\n\t\t\t\t    <li role=\"presentation\"><a href=\"#Save\" aria-controls=\"messages\" role=\"tab\" data-toggle=\"tab\">Save</a></li>\n\t\t\t\t </ul>\n\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"tab-content col-xs-12\">\n\t\t\t\t\t\t{tabs}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n});\n\nRInstrumentBuilderApp = React.createFactory(InstrumentBuilderApp);"]}