(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=45)})({0:function(module,exports){module.exports=React},1:function(module,exports,__webpack_require__){if(false){var throwOnDirectAccess,isValidElement,REACT_ELEMENT_TYPE}else{module.exports=__webpack_require__(2)()}},2:function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret=__webpack_require__(3);function emptyFunction(){}module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret===ReactPropTypesSecret){return}var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use PropTypes.checkPropTypes() to call them. "+"Read more at http://fb.me/use-check-prop-types");err.name="Invariant Violation";throw err}shim.isRequired=shim;function getShim(){return shim}var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim};ReactPropTypes.checkPropTypes=emptyFunction;ReactPropTypes.PropTypes=ReactPropTypes;return ReactPropTypes}},3:function(module,exports,__webpack_require__){"use strict";var ReactPropTypesSecret="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";module.exports=ReactPropTypesSecret},45:function(module,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _react=__webpack_require__(0);var _react2=_interopRequireDefault(_react);var _propTypes=__webpack_require__(1);var _propTypes2=_interopRequireDefault(_propTypes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&((typeof call==="undefined"?"undefined":_typeof(call))==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof superClass==="undefined"?"undefined":_typeof(superClass)))}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}
/**
   *  The following file contains the components used for the field select tab
   *
   *  @author   Jordan Stirling <jstirling91@gmail.com>
   *  @author   Dave MacFarlane <david.macfarlane2@mcgill.ca>
   *  @license  http://www.gnu.org/licenses/gpl-3.0.txt GPLv3
   *  @link     https://github.com/mohadesz/Loris-Trunk
   */var CategoryItem=function(_Component){_inherits(CategoryItem,_Component);function CategoryItem(props){_classCallCheck(this,CategoryItem);return _possibleConstructorReturn(this,(CategoryItem.__proto__||Object.getPrototypeOf(CategoryItem)).call(this,props))}_createClass(CategoryItem,[{key:"render",value:function render(){var classList="list-group-item",badge="";if(this.props.selected){classList+=" active"}if(this.props.count>=0){badge=_react2.default.createElement("span",{className:"badge"},this.props.count)}return _react2.default.createElement("a",{href:"#",className:classList,onClick:this.props.onClick},this.props.name,badge)}}]);return CategoryItem}(_react.Component);var CategoryList=function(_Component2){_inherits(CategoryList,_Component2);function CategoryList(props){_classCallCheck(this,CategoryList);var _this2=_possibleConstructorReturn(this,(CategoryList.__proto__||Object.getPrototypeOf(CategoryList)).call(this,props));_this2.state={selectedCategory:""};_this2.selectCategoryHandler=_this2.selectCategoryHandler.bind(_this2);return _this2}_createClass(CategoryList,[{key:"selectCategoryHandler",value:function selectCategoryHandler(category){var that=this;return function(evt){if(that.props.onCategorySelect){that.props.onCategorySelect(category)}that.setState({selectedCategory:category})}}},{key:"render",value:function render(){var items=[],selectClosure=function selectClosure(name){return this.selectCategory(name)};for(i=0;i<this.props.items.length;i+=1){var selected=false;if(this.props.items[i].category==this.state.selectedCategory){selected=true}items.push(_react2.default.createElement(CategoryItem,{key:this.props.items[i].category,name:this.props.items[i].category,count:this.props.items[i].numFields,selected,onClick:this.selectCategoryHandler(this.props.items[i].category)}))}return _react2.default.createElement("div",{className:"list-group col-md-3 col-sm-12"},items)}}]);return CategoryList}(_react.Component);var FieldItem=function(_Component3){_inherits(FieldItem,_Component3);function FieldItem(props){_classCallCheck(this,FieldItem);var _this3=_possibleConstructorReturn(this,(FieldItem.__proto__||Object.getPrototypeOf(FieldItem)).call(this,props));_this3.state={};_this3.visitSelect=_this3.visitSelect.bind(_this3);return _this3}_createClass(FieldItem,[{key:"visitSelect",value:function visitSelect(evt){var field={instrument:this.props.Category,field:this.props.FieldName};if(evt.target.checked){this.props.fieldVisitSelect("check",evt.target.value,field)}else{this.props.fieldVisitSelect("uncheck",evt.target.value,field)}}},{key:"render",value:function render(){var classList="list-group-item row",downloadIcon="",criteria=void 0,multiselect=void 0,that=this;if(this.props.selected){classList+=" active";multiselect=Object.keys(this.props.Visits).map(function(visit){var checked=false;if(that.props.selectedVisits[visit]){checked=true}return _react2.default.createElement("div",{class:"checkbox"},_react2.default.createElement("label",null,_react2.default.createElement("input",{type:"checkbox",value:visit,checked,onChange:that.visitSelect})," ",visit))})}if(this.props.downloadable){downloadIcon=_react2.default.createElement("span",{className:"glyphicon glyphicon-download-alt pull-right",title:"Downloadable File"})}var displayName=this.props.FieldName;return _react2.default.createElement("div",{className:classList},_react2.default.createElement("div",{className:"col-xs-8",onClick:this.props.onClick},_react2.default.createElement("h4",{className:"list-group-item-heading col-xs-12"},displayName,criteria,downloadIcon),_react2.default.createElement("span",{className:"col-xs-12"},this.props.Description)),_react2.default.createElement("div",{className:"col-xs-4"},multiselect))}}]);return FieldItem}(_react.Component);var FieldList=function(_Component4){_inherits(FieldList,_Component4);function FieldList(props){_classCallCheck(this,FieldList);var _this4=_possibleConstructorReturn(this,(FieldList.__proto__||Object.getPrototypeOf(FieldList)).call(this,props));_this4.state={};_this4.onFieldClick=_this4.onFieldClick.bind(_this4);return _this4}_createClass(FieldList,[{key:"onFieldClick",value:function onFieldClick(fieldName,downloadable){this.props.onFieldSelect(fieldName,this.props.category,downloadable)}},{key:"render",value:function render(){var fields=[];var items=this.props.items||[];var fieldName=void 0,desc=void 0,isFile=void 0,type=void 0,selected=void 0;var rowsPerPage=this.props.FieldsPerPage||20;var start=(this.props.PageNumber-1)*rowsPerPage;var filter=this.props.Filter.toLowerCase();var selectedFields=void 0;if(filter>0){start=0}for(var _i=start;_i<items.length;_i+=1){fieldName=items[_i].key[1];desc=items[_i].value.Description;type=items[_i].value.Type||"varchar(255)";if(fieldName.toLowerCase().indexOf(filter)==-1&&desc.toLowerCase().indexOf(filter)==-1){continue}isFile=false;if(items[_i].value.IsFile){isFile=true}selected=false;if(this.props.selected&&this.props.selected[fieldName]){selected=true}if(this.props.selected&&this.props.selected[fieldName]){selectedFields=this.props.selected[fieldName]}else{selectedFields={}}fields.push(_react2.default.createElement(FieldItem,{FieldName:fieldName,Category:this.props.category,Description:desc,ValueType:type,onClick:this.onFieldClick.bind(this,fieldName,isFile),selected,downloadable:isFile,Visits:this.props.Visits,selectedVisits:selectedFields,fieldVisitSelect:this.props.fieldVisitSelect}));if(fields.length>rowsPerPage){break}}return _react2.default.createElement("div",{className:"list-group col-md-9 col-sm-12"},fields,_react2.default.createElement(PaginationLinks,{Total:items.length,Active:this.props.PageNumber,onChangePage:this.props.changePage,RowsPerPage:rowsPerPage}))}}]);return FieldList}(_react.Component);var FieldSelector=function(_Component5){_inherits(FieldSelector,_Component5);function FieldSelector(props){_classCallCheck(this,FieldSelector);var _this5=_possibleConstructorReturn(this,(FieldSelector.__proto__||Object.getPrototypeOf(FieldSelector)).call(this,props));var instruments={};for(var _i2=0;_i2<_this5.props.items.length;_i2++){instruments[_this5.props.items[_i2].category]=_this5.props.items[_i2].category}_this5.state={filter:"",selectedCategory:"",categoryFields:{},instruments,PageNumber:1};_this5.onFieldSelect=_this5.onFieldSelect.bind(_this5);_this5.onCategorySelect=_this5.onCategorySelect.bind(_this5);_this5.filterChange=_this5.filterChange.bind(_this5);_this5.addAll=_this5.addAll.bind(_this5);_this5.deleteAll=_this5.deleteAll.bind(_this5);_this5.modifyCategoryFieldVists=_this5.modifyCategoryFieldVists.bind(_this5);_this5.changePage=_this5.changePage.bind(_this5);return _this5}_createClass(FieldSelector,[{key:"onFieldSelect",value:function onFieldSelect(fieldName,category,downloadable){this.props.onFieldChange(fieldName,category,downloadable)}},{key:"onCategorySelect",value:function onCategorySelect(category){var that=this;if(this.state.categoryFields[category]){}else{$.get(loris.BaseURL+"/AjaxHelper.php?Module=dataquery&script=datadictionary.php",{category},function(data){var cf=that.state.categoryFields;cf[category]=data;that.setState({categoryFields:cf})},"json")}this.setState({selectedCategory:category,PageNumber:1})}},{key:"filterChange",value:function filterChange(evt){this.setState({filter:evt.currentTarget.value})}},{key:"addAll",value:function addAll(){var i=void 0,isFile=void 0,fieldName=void 0,category=void 0;for(i in this.state.categoryFields[this.state.selectedCategory]){fieldName=this.state.categoryFields[this.state.selectedCategory][i].key[1];category=this.state.categoryFields[this.state.selectedCategory][i].key[0];if(this.props.selectedFields[category]&&this.props.selectedFields[category][fieldName]){}else{isFile=this.state.categoryFields[category][i].value.isFile?true:false;this.props.onFieldChange(fieldName,category,isFile)}}}},{key:"deleteAll",value:function deleteAll(){var i=void 0,index=void 0,fieldName=void 0;for(i in this.state.categoryFields[this.state.selectedCategory]){fieldName=this.state.categoryFields[this.state.selectedCategory][i].key[1];category=this.state.categoryFields[this.state.selectedCategory][i].key[0];if(this.props.selectedFields[category]&&this.props.selectedFields[category][fieldName]){isFile=this.state.categoryFields[category][i].value.isFile?true:false;this.props.onFieldChange(fieldName,category,isFile)}}}},{key:"modifyCategoryFieldVists",value:function modifyCategoryFieldVists(visit,action){if(this.state.selectedCategory&&this.props.selectedFields[this.state.selectedCategory]){for(var field in this.props.selectedFields[this.state.selectedCategory]){if(field==="allVisits"){continue}if(action==="check"&&!this.props.selectedFields[this.state.selectedCategory][field][visit]){this.props.fieldVisitSelect(action,visit,{instrument:this.state.selectedCategory,field})}else if(action===uncheck&&this.props.selectedFields[this.state.selectedCategory][field][visit]){this.props.fieldVisitSelect(action,visit,{instrument:this.state.selectedCategory,field})}}}}},{key:"changePage",value:function changePage(i){this.setState({PageNumber:i})}},{key:"render",value:function render(){var categoryVisits={},selectedFieldsCount=void 0;if(this.state.selectedCategory!=""){if(this.props.selectedFields[this.state.selectedCategory]){selectedFieldsCount=Object.keys(this.props.selectedFields[this.state.selectedCategory]).length-1}for(var key in this.props.Visits){if(this.props.selectedFields[this.state.selectedCategory]&&this.props.selectedFields[this.state.selectedCategory].allVisits[key]&&this.props.selectedFields[this.state.selectedCategory].allVisits[key]==selectedFieldsCount){categoryVisits[key]=true}else{categoryVisits[key]=false}}}return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"row"},_react2.default.createElement("h1",{className:"col-md-8"},this.props.title),_react2.default.createElement("div",{className:"form-group col-sm-4 search"},_react2.default.createElement("label",{className:"col-sm-12 col-md-4"},"Search within instrument:"),_react2.default.createElement("div",{className:"col-sm-12 col-md-8"},_react2.default.createElement("input",{type:"text",onChange:this.filterChange,className:"form-control input-sm"})))),_react2.default.createElement("div",{className:"row form-group"},_react2.default.createElement("div",{className:"col-md-8"},_react2.default.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.addAll},"Add All"),_react2.default.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.deleteAll},"Remove All"))),_react2.default.createElement("div",{className:"row form-group"},_react2.default.createElement("div",{className:"form-group col-sm-8 search"},_react2.default.createElement("label",{className:"col-sm-12 col-md-2"},"Instrument:"),_react2.default.createElement("div",{className:"col-sm-12 col-md-8"},_react2.default.createElement(SelectDropdown,{multi:false,options:this.state.instruments,onFieldClick:this.onCategorySelect,selectedCategory:this.state.selectedCategory}))),_react2.default.createElement("div",{className:"form-group col-sm-4 search"},_react2.default.createElement("label",{className:"col-sm-12 col-md-4"},"Visits:"),_react2.default.createElement("div",{className:"col-sm-12 col-md-8"},_react2.default.createElement(SelectDropdown,{multi:true,options:categoryVisits,onFieldClick:this.modifyCategoryFieldVists})))),_react2.default.createElement("div",{className:"row"},_react2.default.createElement(FieldList,{items:this.state.categoryFields[this.state.selectedCategory],category:this.state.selectedCategory,Criteria:this.props.Criteria,onFieldSelect:this.onFieldSelect,FieldsPerPage:"15",selected:this.props.selectedFields[this.state.selectedCategory],Filter:this.state.filter,Visits:this.props.Visits,fieldVisitSelect:this.props.fieldVisitSelect,changePage:this.changePage,PageNumber:this.state.PageNumber})))}}]);return FieldSelector}(_react.Component);FieldSelector.propTypes={selectedFields:_propTypes2.default.array};window.CategoryItem=CategoryItem;window.CategoryList=CategoryList;window.FieldItem=FieldItem;window.FieldList=FieldList;window.FieldSelector=FieldSelector;exports.default={CategoryItem,CategoryList,FieldItem,FieldList,FieldSelector}}});
//# sourceMappingURL=react.fieldselector.js.map