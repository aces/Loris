{
  "title": "REDCap Config",
  "description": "Congurations for a REDCap to LORIS import",
  "type": "object",
  "properties": {
    "reportId": {
      "description": "The report ID of the REDCap report to import records from",
      "type": "integer"
    },
    "toIgnore": {
      "description": "A list of REDCap variables / field names that are to be ignored i.e. excluded from being imported",
      "type": "array",
      "items": {
        "type": "string"
      },
      "uniqueItems": true
    },
    "datesToScrub": {
      "description": "A list of REDCap date variables / field names requiring scrubbing and/or formatting",
      "type": "array",
      "items": {
        "description": "Object with REDCap variable / field name, the DateTime format, and the DateTime component(s) to scrub with value to replace with",
        "type": "object",
        "properties": {
          "id": {
            "description": "The REDCap date variable / field name",
            "type": "string"
          },
          "format": {
            "description": "The DateTime format of the outputted date string, see https://www.php.net/manual/en/datetime.format.php",
            "type": "string":
          },
          "component": {
            "description": "Array of object with DateTime component to scrub (year, month, day) with value to scrub the date component string with",
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "description": "The DateTime component, one of day, month, or year",
                  "type": "string",
                  "enum": ["year", "month", "day"] 
                },
                "value": {
                  "description": "The value to replace the date component string with",
                  "type": "integer"
                }
              }
            }
          }
        } 
      }
    },
    "siteSpecific": {
      "description": "A list of REDCap variables / field names to be imported only for specific sites",
      "type": "array",
      "items": {
        "type": "string"
      },
      "uniqueItems": true
    },
    "lorisProject": {
      "description": "The LORIS Project name",
      "type": "string"
    },
    "metadataMapping": {
      "description": "An object mapping the candidate-level and visit-level LORIS metadata field names to their REDCap variable / field name. If there are multiple REDCap fields for a given LORIS field, the list is ordered to define default ranking",
      "type": "object",
      "properties": { 
        "pscid": {
          "type": ["string", "array"]
        },
        "visit": {
          "type": ["string", "array"]
        },
        "site": {
          "type": ["string", "array"]
        },
        "dob": {
          "type": ["string", "array"]
        },
        "sex": {
          "type": ["string", "array"]
        },
        "cohort": {
          "type": ["string", "array"]
        },
        "dateOfVisit": {
          "type": ["string", "array"]
        }
      }
    },
    "visitMapping": {
      "description": "An object mapping the REDCap visit values to their LORIS equivalent",
      "type": "array",
      "items": {
        "type": "object",
        "properties": { 
          "redcapValue": {
            "description": "A REDCap visit string value",
            "type": "string"
          },
          "lorisValue": {
            "description": "A LORIS cohort visit value equivalent",
            "type": "string"
          }
        }
      }
    },
    "cohortMapping": {
      "description": "An object mapping the REDCap cohort values to their LORIS equivalent",
      "type": "array",
      "items": {
        "type": "object",
        "properties": { 
          "redcapValue": {
            "description": "A REDCap cohort string value",
            "type": "string"
          },
          "lorisValue": {
            "description": "A LORIS cohort string value equivalent",
            "type": "string"
          }
        }
      }
    },
    "siteMapping": {
      "description": "An object mapping the REDCap site values to their LORIS equivalent",
      "type": "array",
      "items": {
        "type": "object",
        "properties": { 
          "redcapValue": {
            "description": "A REDCap site string value",
            "type": "string"
          },
          "lorisValue": {
            "description": "A LORIS site string value equivalent",
            "type": "string"
          }
        }
      }
    },
    "sexMapping": {
      "description": "An object mapping the REDCap sex values to their LORIS equivalent",
      "type": "array",
      "items": {
        "type": "object",
        "properties": { 
          "redcapValue": {
            "description": "A REDCap sex string value",
            "type": "string"
          },
          "lorisValue": {
            "description": "A LORIS sex string value equivalent",
            "type": "string"
          }
        }
      }
    },
    "consentMapping": {
      "description": "An array of consent objects with field names for consent status, date, consenter, ",
      "type": "array",
      "items": {
        "description": "An object mapping the candidate-level and visit-level LORIS metadata field names to their REDCap variable / field name. If there are multiple REDCap fields for a given LORIS field, the list is ordered to define default ranking",
        "type": "object",
        "properties": { 
          "pscid": {
            "type": ["string", "array"]
          },
          "visit": {
            "type": ["string", "array"]
          },
          "site": {
            "type": ["string", "array"]
          },
          "dob": {
            "type": ["string", "array"]
          },
          "sex": {
            "type": ["string", "array"]
          },
          "cohort": {
            "type": ["string", "array"]
          },
          "dateOfVisit": {
            "type": ["string", "array"]
          }
        }
      }
    },
    "consentStatusMapping": {
      "description": "An object mapping the REDCap consent status values e.g. Yes, No to their LORIS equivalent",
      "type": "array",
      "items": {
        "type": "object",
        "properties": { 
          "redcapValue": {
            "description": "A REDCap consent status string value",
            "type": "string"
          },
          "lorisValue": {
            "description": "A LORIS consent status string value equivalent",
            "type": "string"
          }
        }
      }
    },
    "dateTakenMapping": {
      "description": "An array of objects with the REDCap field name equivalent of the LORIS 'Date_taken' field for a given instrument",
      "type": "array",
      "items": {
        "type": "object",
        "properties": { 
          "instrument": {
            "description": "The LORIS instrument test name",
            "type": "string"
          },
          "dateTaken": {
            "description": "A REDCap 'Date_taken' equivalent variable / field name",
            "type": "string"
          }
        }
      }
    },
    "examinerMapping": {
      "description": "An array of objects with the REDCap field name equivalent of the LORIS 'Examiner' field for a given instrument",
      "type": "array",
      "items": {
        "type": "object",
        "properties": { 
          "instrument": {
            "description": "The LORIS instrument test name",
            "type": "string"
          },
          "dateTaken": {
            "description": "A REDCap 'Examiner' equivalent variable / field name for the given instrument",
            "type": "string"
          }
        }
      }
    },
    "statusFieldsMapping": {
      "description": "An array of REDCap variables with the string '_status' in its field name. '_status' is a reserved string in LORIS for its behavioural data workflow. The array of objects provide the LORIS field equivalent without '_status' in its name",
      "type": "array",
      "items": {
        "type": "object",
        "properties": { 
          "redcapField": {
            "description": "The REDCap variable / field name",
            "type": "string"
          },
          "lorisField": {
            "description": "The LORIS equivalent of the given REDCap variable, without '_status' in the field name",
            "type": "string"
          }
        }
      }
    },
    "instrumentFlagsMapping": {
      "description": "",
      "type": "object",
      "properties": {
        "administration": {
          "description": "The REDCap equivalent field name for LORIS's instrument flag 'Administration'",
          "type": "string"
        },
        "validity": {
          "description": "The REDCap equivalent field name for LORIS's instrument flag 'Validity'",
          "type": "string"
        },
        "dataEntry": {
          "description": "The REDCap equivalent field name for LORIS's instrument flag 'Data_entry'",
          "type": "string"
        }
      }
    }



    
  },
  "required": [ "lorisProject" ],


